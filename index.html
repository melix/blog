<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Cédric Champeau's blog</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">
    <meta name="keywords" content="">    

    <!-- Le styles -->
    <link href="/blog/css/bootstrap.min.css" rel="stylesheet">
    <link href="/blog/css/asciidoctor.css" rel="stylesheet">
    <link href="/blog/css/base.css" rel="stylesheet">
   <script src="https://kit.fontawesome.com/fefa3ec5bf.js" crossorigin="anonymous"></script>
      
    <script src="/blog/js/highlight.min.js"></script>
    <link href="/blog/css/equilibrium-gray-light.min.css" rel="stylesheet">
    <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="js/html5shiv.min.js"></script>
    <![endif]-->

    <!-- Fav and touch icons -->
    <!--<link rel="apple-touch-icon-precomposed" sizes="144x144" href="../assets/ico/apple-touch-icon-144-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="114x114" href="../assets/ico/apple-touch-icon-114-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="72x72" href="../assets/ico/apple-touch-icon-72-precomposed.png">
    <link rel="apple-touch-icon-precomposed" href="../assets/ico/apple-touch-icon-57-precomposed.png">-->
    <link rel="shortcut icon" href="favicon.ico">
  </head>
  <body>
    <div id="wrap">
   
	
	<!-- Fixed navbar -->
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
          <div class="container">
	    <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/blog">Cédric Champeau's blog</a>
	    </div>
            <div class="navbar-collapse collapse">
              <ul class="nav navbar-nav">                
                <li><a href="/blog/about.html">About</a></li>
		<li><a href="/blog/projects.html">Projects</a></li>
		<li><a href="/blog/astronomy.html">Astronomy</a></li>
		<li class="dropdown">
          		<a data-toggle="dropdown" href="#">Topics<b class="caret"></b></a>
		          <ul class="dropdown-menu" role="menu">
				<li><a href="/blog/tags/gradle.html">Gradle</a></li>
                <li><a href="/blog/tags/groovy.html">Groovy</a></li>
                <li><a href="/blog/tags/micronaut.html">Micronaut</a></li>
                <li><a href="/blog/tags/index.html">See all tags</a></li>
		          </ul>
	       </li>
                <li><a href="/blog/feed.xml">Feed</a></li>                
              </ul>
	      <ul class="nav navbar-nav navbar-right">
	      	<li><a href="https://github.com/melix"><i class="fa fa-github"></i></a></li>
	        <li><a href="https://twitter.com/CedricChampeau"><i class="fa fa-twitter"></i></a></li>
	        <li><a rel="me" href="https://mastodon.xyz/@melix"><i class="fa-brands fa-mastodon"></i></a></li>
	        <li><a rel="me" href="https://astrodon.social/@melix"><i class="fa-brands fa-mastodon"></i></a></li>
	      </ul>
            </div>
          </div>
      </div>
      <div class="container">

	<div class="page-header">
		<h1>Blog</h1>
	</div>
  			<a href="/blog/2024/06-14-jsolex-helium-continuum.html"><h1>Extraction automatique d&#8217;images Hélium avec JSol&#8217;Ex</h1></a>
  			<p>14 June 2024</p>
			<p><em>Tags: </em>
		<a href="/blog/tags/solex.html">solex</a> 
	
		<a href="/blog/tags/jsolex.html">jsolex</a> 
	
		<a href="/blog/tags/solaire.html">solaire</a> 
	
		<a href="/blog/tags/astronomie.html">astronomie</a> 
	</p>
			
  			<p><div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>Dans ce billet, je vais prendre exemple d&#8217;un cas d&#8217;utilisation particulier, l&#8217;extraction d&#8217;images Hélium, pour expliquer comment j&#8217;envisage le développement de JSol&#8217;Ex, dans l&#8217;optique de simplifier, d&#8217;une version à une autre, son exploitation par les utilisateurs.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_principe_du_solex">Principe du Sol&#8217;Ex</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Rappelons tout d&#8217;abord le principe de base du <a href="http://www.astrosurf.com/solex/">Sol&#8217;Ex de Christian Buil</a>.
Le concept requiert de reconstituer une image du soleil, ligne par ligne, en exploitant une vidéo dont chaque trame montre une partie du spectre solaire, centré sur une raie particulière que l&#8217;on étudie.
La raie la plus communément étudiée est la raie H-alpha, qui, sur le spectre solaire, apparaît en absorption, c&#8217;est à dire qu&#8217;elle sera une ligne sombre sur une image du spectre :</p>
</div>
<div class="imageblock">
<div class="content">
<img src="/blog/img/jsolex-helium/spectre.jpg" alt="spectre">
</div>
<div class="title">Figure 1. Image du spectre solaire, raie H-alpha sombre détectée</div>
</div>
<div class="paragraph">
<p><em>En haut, l&#8217;image telle qu&#8217;on la trouve dans la vidéo, la ligne est "déformée". En bas, l&#8217;image "corrigée". Les points bleus correspondent à la détection de l&#8217;effet Doppler, les lignes sombres verticales correspondent à des taches solaires.</em></p>
</div>
<div class="paragraph">
<p>Les logiciels comme <a href="http://valerie.desnoux.free.fr/inti/">INTI</a> et <a href="https://melix.github.io/astro4j/latest/fr/jsolex.html">JSol&#8217;Ex</a> exploitent le fait que la ligne étudiée est la plus sombre de l&#8217;image pour se repérer.
Un des aspects fondamentaux de la reconstruction que je n&#8217;avais honnêtement pas compris lorsque je me suis lancé dans ce projet, c&#8217;est que <strong>tout le signal permettant de recomposer l&#8217;image H-alpha se trouve dans cette ligne sombre</strong>.
En effet, même si elle paraît "noire", il y a en fait bien d&#8217;infimes variations dans cette ligne, et c&#8217;est celà qui nous sert à reconstituer une image !</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
<div class="title">8 bits vs 16 bits</div>
Cet aspect explique l&#8217;importance d&#8217;utiliser une acquisition en 16 bits et non en 8-bits.
En effet, si l&#8217;acquisition est faite en 8 bits, on ne dispose que de 256 valeurs possibles pour encoder l&#8217;ensemble de la dynamique de l&#8217;image.
Si le signal ne se trouve qu&#8217;au centre de la raie, on comprend vite qu&#8217;on ne dispose alors que d&#8217;un nombre très limité de valeurs pour ce qui se passe dans cette simple région.
En utilisant 16 bits, on augmente sensiblement notre capacité à encoder des valeurs de niveaux différents dans le centre de la raie, puisqu&#8217;on dispose cette fois de 65536 valeurs possibles pour l&#8217;ensemble de l&#8217;image !
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_le_cas_des_raies_hélium">Le cas des raies Hélium</h2>
<div class="sectionbody">
<div class="paragraph">
<p>La détection de raies sombres permet, si la fenêtre de cropping du spectre est relativement petite, de se concentrer sur une raie à étudier.
Ca fonctionne très bien pour les raies H-alpha, Magnésium, Calcium K ou H, etc, qui sont des raies en absorption.</p>
</div>
<div class="paragraph">
<p>En revanche, la raie Hélium est une raie en émission : elle est "claire" au lieu d&#8217;être sombre, mais elle est aussi impossible à distinguer dans la plupart des trames parce que noyée dans le flux.
Aussi les logiciels ne peuvent pas la trouver.</p>
</div>
<div class="paragraph">
<p>Alors, comment fait JSol&#8217;Ex, dans ses dernières versions, pour être capable de produire en 1 clic une image Hélium comme celle ci-dessous ?
La question est intéressante non seulement d&#8217;un point de vue technique, mais aussi pour comprendre la façon dont j&#8217;aborde le développement de JSol&#8217;Ex.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="/blog/img/jsolex-helium/image-helium.jpg" alt="image helium">
</div>
</div>
<div class="paragraph">
<p>Le site de Christian Buil <a href="http://www.astrosurf.com/solex/sol-ex-observation.html">est une nouvelle mine d&#8217;information pour nous aider</a> : pour pouvoir produire une telle image, il est nécessaire de prendre une raie sombre comme référence, puis d&#8217;appliquer un "décalage de pixels" pour "trouver" la raie Hélium.
Enfin, il est nécessaire de procéder à une soustraction du continuum (une 2ème image).</p>
</div>
<div class="paragraph">
<p>Cette notion de décalage de pixels est bien connue des utilisateurs chevronnés du Sol&#8217;Ex.
Le principe est relativement simple : au lieu de reconstituer une image en utilisant le centre de la raie détectée (la ligne rouge dans l&#8217;image spectrale ci-dessus), on va reconstituer une image en se décalant vers le haut ou vers le bas de quelques pixels.
C&#8217;est ce même principe qui permet de créer des images Doppler du soleil, qui montrent en bleu les régions qui s&#8217;approchent de nous et en rouge celles qui s&#8217;éloignent.
On peut même produire des timelapses assez spectaculaires comme cette animation que j&#8217;ai réalisée le 5 juin 2024 et qui est générée par le logiciel en quelques minutes :</p>
</div>
<div style="position:relative;padding-bottom:56.25%;height:0;overflow:hidden;"> <iframe style="width:100%;height:100%;position:absolute;left:0px;top:0px;overflow:hidden" frameborder="0" type="text/html" src="https://www.dailymotion.com/embed/video/x8znzg6?autoplay=1" width="100%" height="100%" allowfullscreen title="Dailymotion Video Player" allow="autoplay; web-share"> </iframe> </div>
<br>
<div class="paragraph">
<p>Comme <a href="https://www.youtube.com/watch?v=TuF6R9K5cqg&amp;feature=youtu.be">Christian l&#8217;explique dans cette vidéo</a>, trouver ce décalage de pixels n&#8217;est pas forcément chose simple.
Tout d&#8217;abord, il est nécessaire de trouver la raie "sombre" de référence : on utilisera traditionellement le doublet du sodium pour se répérer, puis on utilisera la raie Sodium D2 ou encore la raie Fe I présente à côté comme référence.</p>
</div>
<div class="paragraph">
<p>Ensuite, il faut trouver ce fameux décalage de pixels pour "tomber" sur la raie Hélium.
La vidéo de Christian ne montre pas les dernières améliorations que Valérie Desnoux a intégré à INTI pour rendre les choses plus simples, mais, grossièrement, il faut :</p>
</div>
<div class="ulist">
<ul>
<li>
<p>faire une capture surexposée qui va nous permettre de "voir" la raie hélium</p>
</li>
<li>
<p>faire une capture "normale" pour disposer de l&#8217;image à réellement traiter</p>
</li>
<li>
<p>ouvrir INTI et traiter la première vidéo pour disposer de l&#8217;image moyenne montrant la raie Hélium en bord de champ</p>
</li>
<li>
<p>traiter la 2ème vidéo en mode "raie libre", utiliser "polynôme automatique" et ouvrir l&#8217;image moyenne calculée lors du premier traitement pour trouver le décalage</p>
</li>
<li>
<p>enfin utiliser un autre logiciel comme i-Spec pour faire la soustraction</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Cette procédure, <a href="http://valerie.desnoux.free.fr/inti/">bien que documentée</a>, est très intimidante pour les utilisateurs et explique que peu se soient lancés dans ce défi.</p>
</div>
<div class="paragraph">
<p>Dans JSol&#8217;Ex, la procédure est simplifiée au maximum :</p>
</div>
<div class="ulist">
<ul>
<li>
<p>on fait une capture "classique", intégrant la raie de référence (ex SoD2) et en utilisant un cropping assez large pour intégrer aussi la raie proche Hélium</p>
</li>
<li>
<p>on ouvre le fichier dans JSol&#8217;Ex : les images sont générées automatiquement, il n&#8217;y a rien à calculer, pas de soustraction de continuum, rien, juste un clic !</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Ca ne prend que quelques secondes !</strong></p>
</div>
<iframe width="1000" height="600" src="https://www.youtube.com/embed/yE6de4JM0Cw?si=O_qZrCAISZliPfxA" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>
</div>
</div>
<div class="sect1">
<h2 id="_le_processus_de_simplification">Le processus de simplification</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_imagemath">ImageMath</h3>
<div class="paragraph">
<p>Avant d&#8217;en arriver là, il a fallu de nombreuses améliorations, qui ont été livrées au fur et à mesure des versions.
La première, c&#8217;est ce système de script que j&#8217;ai appelé "ImageMath" (le nom est inspiré de PixelMath dans PixInsight) : il permet d&#8217;utiliser des scripts pour produire des images que JSol&#8217;Ex ne produit pas tout seul.
Cette avancée a permis d&#8217;écrire un script qui produit une image Hélium à partir d&#8217;un seul fichier SER :</p>
</div>
<div class="listingblock">
<div class="title">Un exemple de script permettant de générer une image Hélium</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="python">[params]
# Entrer la valeur du décalage de raie
RaieHelium = -85
# Limites hautes et basses pour le continuum
ContinuumLo=-80
ContinuumHi=-70
# Stretch de l'image
Stretch=10

## Variables temporaires
[tmp]
continuum = max(range(ContinuumLo,ContinuumHi))
helium_raw = autocrop(img(RaieHelium) - continuum)

## Maintenant les images !
[outputs]
helium = asinh_stretch(helium_raw, blackPoint, Stretch)
helium_fixed = asinh_stretch(fix_banding(helium_raw;BandWidth;BandIterations),blackPoint, Stretch)
helium_color = colorize(helium_fixed, "Helium (D3)")</code></pre>
</div>
</div>
<div class="paragraph">
<p>Néanmoins, vous noterez que ce script nécessite toujours de déterminer le décalage de la raie Hélium, ainsi que la position du continuum.
Ceci pouvait cependant être fait simplement avec le même fichier SER en l&#8217;ouvrant dans le "débogueur de raie", une procédure que <a href="https://www.youtube.com/watch?v=EwUUg06opKU">je décrivais à l&#8217;époque dans une vidéo</a>.</p>
</div>
<div class="paragraph">
<p>Cette procédure permettait ainsi d&#8217;obtenir une image Hélium en moins de 5 minutes, ce qui était déja une amélioration sensible par rapport à avant : plus besoin de faire 2 vidéos distinctes et un décalage de pixels calculé par le logiciel avec l&#8217;assistance de l&#8217;utilisateur.</p>
</div>
<div class="paragraph">
<p>Bien que ce soit une amélioration notable, on peut faire encore mieux.</p>
</div>
</div>
<div class="sect2">
<h3 id="_profils_spectraux">Profils spectraux</h3>
<div class="paragraph">
<p>JSol&#8217;Ex affiche depuis longtemps dans un onglet le "profil spectral" de l&#8217;image étudiée et peut aussi calculer la <em>dispersion</em>, mesurée en Angrstöms par pixel, d&#8217;une image.
Ce profil correspond à l&#8217;intensité des raies pour un décalage de pixels donné.
Depuis la version 2.3.0 cependant, j&#8217;ai intégré une fonctionnalité qui permet de détecter automatiquement la raie étudiée grâce à la comparaison de ce profil à un profil de référence (les données sont issues de la <a href="https://bass2000.obspm.fr/solar_spect.php">base de données BASS2000</a>).
Grâce à celà, il est désormais possible de savoir comment une image "s&#8217;aligne" entre le profil de référence et celui qu&#8217;on étudie.
Puisque l&#8217;on connait à la fois la position de la raie de référence (Sodium D2 par exemple) et la dispersion, il est alors possible de calculer de combien de pixels on doit se déplacer pour trouver la raie Hélium !</p>
</div>
<div class="paragraph">
<p>Cette fonctionnalité est d&#8217;ailleurs disponible dans les scripts sous le nom de 'find_shift`.</p>
</div>
</div>
<div class="sect2">
<h3 id="_soustraction_du_continuum">Soustraction du continuum</h3>
<div class="paragraph">
<p>A ce stade, nous disposons donc d&#8217;une image dont on sait qu&#8217;elle contient une raie de référence (Sodium D2 ou Fer Fe I) mais aussi le décalage en pixels de la raie Hélium.
Il nous manque cependant la soustraction du continuum.
Là encore, le script ci-dessus montre qu&#8217;il fallait entrer une valeur "à la main" pour trouver ce qu&#8217;il fallait soustraire.
Une façon simple de procéder était encore une fois d&#8217;ouvrir le débogueur et de regarder les lignes plus claires dans le spectre : l&#8217;oeil étant assez sensible aux changements de contraste, il n&#8217;était pas trop compliqué de trouver un intervalle raisonnable pour le continuum.</p>
</div>
<div class="paragraph">
<p>Néanmoins, si on souhaite arriver à un traitement complètement automatique, on ne peut plus se baser sur une valeur "pifométrique".
Une façon naïve de régler le problème aurait été d&#8217;utiliser un décalage fixe (par exemple 15 pixels).
Cependant, ça ne fonctionne pas, pour plusieurs raisons :</p>
</div>
<div class="ulist">
<ul>
<li>
<p>le décalage dépend de la résolution (taille des pixels, dispersion)</p>
</li>
<li>
<p>on peut tomber sur une raie trop sombre, cette région du spectre étant assez contrastée</p>
</li>
<li>
<p>le résultat est très sensible à l&#8217;exposition</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Pour cette raison, j&#8217;ai ajouté une fonctionnalité qui calcule un "continuum synthétique".</p>
</div>
<div class="paragraph">
<p>Il faut noter que contrairement à l&#8217;image "continuum" qui utilise un décalage fixe (et configurable) dans les traitements standards, ce continuum synthétique est utilisé uniquement dans le contexte du traitement Hélium, ou lors de l&#8217;utilisation de la fonction <code>continuum()</code> dans un script.</p>
</div>
<div class="paragraph">
<p>L&#8217;idée de cette fonction est de calculer une image qui représente au mieux le continuum à soustraire.
Au lieu d&#8217;utiliser un seul décalage de pixels, on va effectuer un calcul à partir de plusieurs décalages (cette fonction nécessite donc plus de ressources lors du traitement).
Ainsi la première chose à comprendre c&#8217;est qu&#8217;il ne s&#8217;agira pas d&#8217;une image à une longueur d&#8217;onde précise, mais bel et bien d&#8217;une image synthétique basée sur des propriétés statistiques.</p>
</div>
<div class="paragraph">
<p>En premier lieu, on effectue un échantillonnage des images à différents décalages de pixels, du minimum possible au maximum possible par rapport à la fenêtre de cropping du spectre et de la distorsion.
Par exemple, si chaque trame fait 2000x200 pixels, on dispose potentiellement de 100 décalages entiers (la hauteur de l&#8217;image).
Cependant, à cause de la distorsion, seuls un sous-ensemble nous permet d&#8217;avoir des lignes complètes lors de la reconstruction (disons, 180 lignes, qui donneront 180 images).
Sur ces 180 décalages possible, nous n&#8217;allons, pour des raisons de performance, uniquement en retenir un échantillon (environ 1/3), ce qui nous donnera donc 60 images à étudier.
Sur ces 60 images, on élimine celles qui correspondent à un décalage de pixel trop proche de la raie de référence puisque de manière évidente elles ne correspondent pas au continuum.</p>
</div>
<div class="paragraph">
<p>Dès lors commence l&#8217;analyse statistique : pour chacune de ces images, on calcule leur valeur moyenne.
Ensuite, nous calculons la moyenne de ces moyennes et nous ne conservons que les images dont la moyenne est supérieure à cette moyenne.</p>
</div>
<div class="paragraph">
<p>A ce stade, il nous reste donc quelques candidates, dont la luminosité est suffisante pour être considérée comme le continuum, mais on dispose bien d&#8217;une liste d&#8217;images.
La dernière étape consiste donc à calculer la médiane de toutes ces images, pour obtenir un et un seul "continuum synthétique".</p>
</div>
<div class="paragraph">
<p>Si on reprend les étapes, celà nous donne par exemple:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>on dispose de 60 images à des décalages de pixels (entiers)</p>
</li>
<li>
<p>on retire les 8 qui sont au centre de la raie étudiée, il en reste 52</p>
</li>
<li>
<p>on calcule la valeur moyenne de chacune de ces images : 5000, 8000, 5200, 6400, &#8230;&#8203;</p>
</li>
<li>
<p>on calcule la moyenne de toutes ces moyennes, par ex: 6000</p>
</li>
<li>
<p>on ne retient que les images dont la moyenne est supérieure à cette moyenne, disons qu&#8217;il en reste 30</p>
</li>
<li>
<p>on calcule la médiane de ces 30 images</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Il ne nous reste donc plus qu&#8217;à faire la soustraction entre l&#8217;image au décalage de pixels de la raie Hélium avec le continuum synthétique calculé et on obtient l&#8217;image Hélium ci-dessus, en quelques secondes seulement !</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_conclusion">Conclusion</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Dans ce billet, j&#8217;ai décris la façon dont je procède pour améliorer JSol&#8217;Ex.
En premier lieu, il s&#8217;agit d&#8217;identifier un besoin particulier, par exemple, ici, produire une image Hélium.
A partir de ce besoin, il s&#8217;agit de chercher comment simplifier un tel traitement.
La simplification ne se fait alors qu&#8217;à partir de ce dont je dispose à un instant <em>t</em>.
Par exemple, dans un premier temps, il a s&#8217;agit d&#8217;ajouter un système de scripts, qui, outre le traitement des images Hélium, permet d&#8217;exploiter la richesse des données disponibles dans un scan.
Les personnes intéressées peuvent en apprendre plus sur les scripts <a href="https://youtu.be/8XKzFcmvqfI">dans ce tutoriel</a>.</p>
</div>
<div class="paragraph">
<p>Ensuite, il a s&#8217;agit d&#8217;ajouter des fonctionnalités permettant de simplifier la configuration pour les utilisateurs, en l&#8217;occurrence la détection automatique de raie, puis d&#8217;exploiter ces nouvelles fonctionnalités pour simplifier encore plus le traitement des images.</p>
</div>
<div class="paragraph">
<p>Ainsi, il s&#8217;agit d&#8217;une méthode très itérative, mais toujours dans le but de livrer des incréments fournissant une certaine valeur ajoutée aux utilisateurs.
La bonne nouvelle, c&#8217;est que j&#8217;ai beaucoup d&#8217;autres idées en tête !</p>
</div>
<div class="sect2">
<h3 id="_ressources">Ressources</h3>
<div class="ulist">
<ul>
<li>
<p><a href="https://melix.github.io/astro4j/latest/fr/jsolex.html">JSol&#8217;Ex</a> (téléchargement et documentation)</p>
</li>
<li>
<p><a href="http://valerie.desnoux.free.fr/inti/">INTI</a> (logiciel officiel)</p>
</li>
<li>
<p><a href="http://www.astrosurf.com/solex/sol-ex-traitement.html">Sol&#8217;Ex</a> (site officiel Sol&#8217;Ex)</p>
</li>
</ul>
</div>
</div>
</div>
</div></p>
  			<a href="/blog/2024/04-25-jsolex-contrast.html"><h1>JSol&#8217;Ex 2.2.0 et amélioration du contraste</h1></a>
  			<p>25 April 2024</p>
			<p><em>Tags: </em>
		<a href="/blog/tags/solex.html">solex</a> 
	
		<a href="/blog/tags/jsolex.html">jsolex</a> 
	
		<a href="/blog/tags/solaire.html">solaire</a> 
	
		<a href="/blog/tags/astronomie.html">astronomie</a> 
	</p>
			
  			<p><div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p><a href="https://github.com/melix/astro4j/releases/tag/2.2.0">JSol&#8217;Ex 2.2.0</a> est tout juste sorti ! Dans cette version, j&#8217;ai particulièrement travaillé sur l&#8217;amélioration des contrastes. En effet, celles et ceux qui m&#8217;ont entendu parler de ce logiciel savent que je râle depuis longtemps sur mon algo d&#8217;amélioration de contraste. Dans JSol&#8217;Ex, il y a plusieurs algorithmes d&#8217;implémentés. Historiquement, le premier était une transformation sinus hyperbolique inverse, qui fonctionne relativement bien pour faire ressortir les zones plus sombres, mais éclaircit trop le reste. L&#8217;autre algorithme, utilisé aussi par <a href="http://valerie.desnoux.free.fr/inti/">INTI</a>, c&#8217;est la normalisation locale d&#8217;histogramme (CLAHE).</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_les_problèmes_avec_clahe">Les problèmes avec CLAHE</h2>
<div class="sectionbody">
<div class="paragraph">
<p>CLAHE est un algorithme qui améliore sensiblement le contraste. Cependant, je n&#8217;ai jamais été très content du résultat. Je ne sais pas comment Valérie Desnoux fait dans INTI, qui a l&#8217;air de s&#8217;en sortir mieux, mais dans JSol&#8217;Ex les résultats obtenus sont assez moyens.
En particulier, je note plusieurs défauts :</p>
</div>
<div class="ulist">
<ul>
<li>
<p>la création d&#8217;artéfacts, liés au fait que cet algorithme travaille sur des "tuiles" d&#8217;une taille donnée. Plus la taille de la tuile est élevée, moins l&#8217;amélioration de contraste est aggressive, mais plus les artéfacts sont visibles</p>
</li>
<li>
<p>sur l&#8217;image du soleil, les limbes sont toujours éclaircis, ce qui me mène au point suivant</p>
</li>
<li>
<p>les images solaires paraissent plus "plates" : le relief, en particulier l&#8217;obscurcissement lié à la sphéricité du soleil, disparaît. C&#8217;est aussi un effet mécanique de l&#8217;algorithme lui-même : plus la taille des tuiles est faible, moins on peut utiliser de valeurs distinctes. Ainsi pour une taille de tuile à 16 pixels, on aura au maximum 256 valeurs possibles (pour une image 16 bits avec 65536 valeurs à l&#8217;origine). Or, les meilleurs résultats, sur Sol&#8217;Ex, sont obtenus avec une taille de tuile de 8 pixels, soit une réduction à 64 valeurs possibles maximum.</p>
</li>
<li>
<p>il y a trop de paramètres possibles : la taille des tuiles, la dynamique et enfin le "facteur de coupe" pour l&#8217;égalisation. Sans entrer dans les détails, trouver une combinaison qui fonctionne bien indépendamment de la taille des images en entrée, de la dynamique de l&#8217;image et enfin du type d&#8217;image (H-alpha, calcium) est presque impossible.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Pour illustrer mon propos, voici par exemple un disque solaire (le fichier SER est <a href="http://www.astrosurf.com/solex/sol-ex-traitement.html">celui disponible sur le site de Christian Buil</a>) traité par JSol&#8217;Ex 2.1 (version précédente donc), avec les paramètres par défaut, une tuile de taille 16 pixels (à gauche) ou 64 pixels (à droite) :</p>
</div>
<div class="paragraph">
<p>
<div class="container-fluid">
<div class="row">
   <div class="col-md-6">
      <img class="img-responsive pop" src="/blog/img/jsolex2_2/clahe_16_jsolex_2.1.jpg">
   </div>
   <div class="col-md-6">
      <img class="img-responsive pop" src="/blog/img/jsolex2_2/clahe_64_jsolex_2.1.jpg">
   </div>
</div>
</div>
</p>
</div>
<div class="paragraph">
<p>On note déja clairement éclaircissement des limbes, et des artéfacts "carrés" qui apparaissent dès que la taille des tuiles augmente.
Trouver les bons paramètres qui conviennent à tous étant compliqué, JSol&#8217;Ex offrait déja la possibilité de changer ces paramètres (taille de tuile, intensité, &#8230;&#8203;) mais je pense que peu d&#8217;utilisateurs le faisaient.</p>
</div>
<div class="paragraph">
<p>Aussi ais-je décidé d&#8217;ajouter un algorithme dans JSol&#8217;Ex 2.2 dédié aux images solaires.
Pour vous donner un peu envie de lire la suite, voici ce qu&#8217;on peut obtenir avec JSol&#8217;Ex 2.2 sur la même image :</p>
</div>
<img src="/blog/img/jsolex2_2/christian-jsolex-2.2-decon.jpg" class="img-responsive center-block" width="50%">
</div>
</div>
<div class="sect1">
<h2 id="_nouvel_algorithme">Nouvel algorithme</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Le nouvel algorithme est disponible dans JSol&#8217;Ex 2.2 et est l&#8217;algorithme utilisé par défaut.
Il combine plusieurs techniques, dont une correction du gamma avec masques, CLAHE et un stretching dynamique de l&#8217;image, pour produire une image plus digne de ce que Sol&#8217;Ex peut faire.
Je ne prétends pas que cet algorithme est parfait, il a lui aussi des défauts, mais il semble être un bon compromis.</p>
</div>
<div class="paragraph">
<p>Afin de vérifier mes assertions, j&#8217;ai procédé méthodiquement à une comparaison des images produites avec les paramètres par défaut de INTI, JSol&#8217;Ex 2.1 et JSol&#8217;Ex 2.2 (la seule modification est l&#8217;autocrop activé et un retournement vertical pour que les images soient orientées de la même façon).</p>
</div>
<div class="paragraph">
<p>Commençons par la vidéo H-alpha de démonstration utilisée par Christian Buil sur son site.</p>
</div>
<div class="paragraph">
<p><strong>Les images pouvant être difficiles à comparer en taille réduite, je vous invite à faire un clic doit et ouvrir l&#8217;image dans un nouvel onglet pour comparer.</strong></p>
</div>
<div class="imageblock">
<div class="content">
<img src="/blog/img/jsolex2_2/comparaison-panel-1.jpg" alt="comparaison panel 1">
</div>
</div>
<div class="paragraph">
<p>On note clairement que sur JSol&#8217;Ex 2.1, il y avait certes une amélioration de contraste, mais elle se faisait au prix d&#8217;artéfacts et d&#8217;une perte de relief.
En revanche, JSol&#8217;Ex 2.2 offre une image plus nette que celle d&#8217;INTI, sans avoir les défauts de CLAHE.</p>
</div>
<div class="paragraph">
<p>Continuons avec une autre image solaire en H-alpha, avec plus de dynamique :</p>
</div>
<div class="imageblock">
<div class="content">
<img src="/blog/img/jsolex2_2/comparaison-panel-2.jpg" alt="comparaison panel 2">
</div>
</div>
<div class="paragraph">
<p>Là encore on remarque que JSol&#8217;Ex 2.1 produisait une image raisonnable mais assez saturée et surtout "plate".
La version 2.2.0, quant à elle, offre une meilleure dynamique tout en préservant les détails et cette impression de profondeur.</p>
</div>
<div class="paragraph">
<p>Nous pouvons aussi comparer les résultats sur une image obtenue avec une plus longue focale et un disque partiel :</p>
</div>
<div class="imageblock">
<div class="content">
<img src="/blog/img/jsolex2_2/comparaison-panel-3.jpg" alt="comparaison panel 3">
</div>
</div>
<div class="paragraph">
<p>Cette fois-ci on note que les 3 logiciels s&#8217;en tirent honorablement.
Cependant, JSol&#8217;Ex 2.1.3 affiche une image moins contrastée que la v2.2.0, alors qu&#8217;INTI v6 affiche une image légèrement plus floue.</p>
</div>
<div class="paragraph">
<p>Malheureusement suite à une fausse manipulation, j&#8217;ai perdu la plupart de mes fichiers SER en raie calcium. J&#8217;ai cependant pu faire des comparaisons, sur des fichiers loins d&#8217;être idéaux.
Les résultats sont cependant intéressants :</p>
</div>
<div class="imageblock">
<div class="content">
<img src="/blog/img/jsolex2_2/comparaison-panel-4.jpg" alt="comparaison panel 4">
</div>
</div>
<div class="paragraph">
<p>Cette fois-ci, on constate que JSol&#8217;Ex 2.1 s&#8217;en sortait plutôt bien. INTI là encore fait un travail remarquable, mais JSol&#8217;Ex 2.2 sature trop l&#8217;image.
C&#8217;est un défaut que j&#8217;espère arriver à corriger, qui est lié au fait que les images calcium on un histogramme avec une gaussienne à base très large.
Il est néanmoins possible d&#8217;atténuer la saturation en choisissant un facteur de correction moins fort (par exemple 1.1 au lieu de la valeur par défaut 1.5), ce que je vous encourage à faire pour les images Calcium (conserver le 1.5 pour le h-alpha, baisser pour le calcium) :</p>
</div>
<img src="/blog/img/jsolex2_2/calcium-1-jsolex-2-2-facteur-1.1.jpg" class="img-responsive center-block" width="50%">
<div class="paragraph">
<p>Le résultat dépendra cependant beaucoup de l&#8217;exposition initiale de votre vidéo. Voici un autre exemple en raie calcium K:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="/blog/img/jsolex2_2/comparaison-panel-5.jpg" alt="comparaison panel 5">
</div>
</div>
<div class="paragraph">
<p>Il est utile de noter que si vous n&#8217;êtes pas satisfait du nouvel algorithme, il est tout à fait possible de repasser à CLAHE :</p>
</div>
<img src="/blog/img/jsolex2_2/config-params.jpg" class="img-responsive center-block" width="50%">
<div class="paragraph">
<p>Enfin, il vous est tout à fait possible d&#8217;être plus ou moins "aggressif" sur l&#8217;amélioration de constraste à effectuer.
Ansi, dans les paramètres de traitement, vous pouvez changer le facteur <em>gamma</em> qui permet d&#8217;assombrir l&#8217;image.
Pour l&#8217;exemple, si on pousse les curseurs un peu loin (par exemple à <em>4</em> dans l&#8217;image suivante), vous constaterez que l&#8217;image reste exploitable, et surtout que les défauts de CLAHE qui a tendance à aplatir les images est complètement disparu :</p>
</div>
<img src="/blog/img/jsolex2_2/gamma-4.jpg" class="img-responsive center-block" width="50%">
</div>
</div>
<div class="sect1">
<h2 id="_pour_aller_encore_plus_loin">Pour aller encore plus loin</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Tout d&#8217;abord, JSol&#8217;Ex offre un <a href="https://melix.github.io/astro4j/latest/fr/jsolex.html#imagemath">langage de script</a> qui permet d&#8217;aller bien plus loin dans les traitements, de générer automatiquement des animations, etc.
Bien sûr, les améliorations de JSol&#8217;Ex 2.2 sont disponibles dans les scripts par l&#8217;intermédiaire de 2 nouvelles fonctions : <code>adjust_gamma</code> qui permet de réaliser une simple correction de gamma sur l&#8217;image, et <code>auto_constrast</code> qui correspond à la correction décrite dans ce billet de blog.</p>
</div>
<div class="paragraph">
<p>Enfin, nous n&#8217;avons pas encore parlé des fonctionnalités désactivées par défaut, mais qui étaient déja disponibles dans JSol&#8217;Ex : la déconvolution et l&#8217;amélioration de la netteté.
Ces deux options sont activables dans les paramètres de traitement :</p>
</div>
<img src="/blog/img/jsolex2_2/config-params-2.jpg" class="img-responsive center-block" width="50%">
<div class="paragraph">
<p>Je ne recommande pas nécessairement de cocher la case "aiguiser les détails" si vous avez des images trop bruitées.
Cette dernière ligne compare donc la même image, traitée avec <a href="/blog/img/jsolex2_2/halpha-3-inti-6.png" target="_blank" rel="noopener">INTI v6</a>, JSol&#8217;Ex 2.2 (dernière version donc), mais <a href="/blog/img/jsolex2_2/halpha-3-jsolex-2.2.jpg" target="_blank" rel="noopener">sans déconvolution</a>, <a href="/blog/img/jsolex2_2/halpha-3-jsolex-2.2-decon.jpg" target="_blank" rel="noopener">avec déconvolution</a> et finalement <a href="/blog/img/jsolex2_2/halpha-3-jsolex-2.2-decon-sharpen.jpg" target="_blank" rel="noopener">avec déconvolution et amélioration des détails</a> :</p>
</div>
<div class="imageblock">
<div class="content">
<img src="/blog/img/jsolex2_2/comparaison-panel-6.jpg" alt="comparaison panel 6">
</div>
</div>
<div class="paragraph">
<p>En ce qui me concerne, je trouve la version déconvoluée particulièrement plaisante à l&#8217;oeil, et j&#8217;active donc systématiquement la déconvolution :</p>
</div>
<div class="imageblock">
<div class="content">
<img src="/blog/img/jsolex2_2/halpha-3-jsolex-2.2-decon.jpg" alt="halpha 3 jsolex 2.2 decon">
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_conclusion">Conclusion</h2>
<div class="sectionbody">
<div class="paragraph">
<p>En conclusion, dans ce billet je vous ai présenté le nouvel algorithme de correction de contraste, activé par défaut dans JSol&#8217;Ex 2.2.
Je pense que les résultats sont assez probants, et que JSol&#8217;Ex n&#8217;a plus à rougir de INTI en ce qui concerne les images avec amélioration de contraste.
Cependant, je rappelle encore une fois que le logiciel officiel <strong>est</strong> INTI, que c&#8217;est le seul validé avec le sérieux de Christian Buil et Valérie Desnoux.
Si vous voulez déposer des images sur BASS2000, vous <strong>devez</strong> utiliser INTI.
Par ailleurs, je vous conseille toujours de comparer les résultats, ne considérez pas que JSol&#8217;Ex fait un meilleur travail, c&#8217;est probablement faux.</p>
</div>
<div class="paragraph">
<p>Par exemple, il reste des améliorations à faire sur les images calcium. Mais il est cependant tout à fait possible de modifier les paramètres par défaut, voire de changer d&#8217;algorithme.</p>
</div>
<div class="paragraph">
<p>N&#8217;oubliez pas non plus que JSo&#8217;Ex offre d&#8217;autres fonctionnalités comme la colorisation automatique des images, le stacking, la création de mosaïques solaires ou encore un langage de script particulièrement puissant, qui vous permet par exemple de générer des animations automatiquement.
Je vais donc conclure ce billet avec un exemple de script qui utilise cette nouvelle amélioration de contraste pour produire une animation qui nous fait plonger dans l&#8217;atmosphère solaire en jouant sur le décalage de pixels :</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="python"># Décalage de pixels qu'on applique, de -15 à +15, pas de 0.5
images=range(-15,15,.5)
# On calcule une image corrigée de ses transversalliums
corrigee=fix_banding(images,32,40)
# Déconvolution
decon=rl_decon(corrigee)
# On redimensionne
redim=rescale_rel(autocrop2(decon,1.1),.5,.5)
# On applique la correction de contraste décrite dans ce billet
cst=auto_contrast(redim,1.5)

[outputs]
# Enfin on produit l'animation (75ms entre chaque frame)
animation=anim(cst,75)</code></pre>
</div>
</div>
<div class="text-center">
 <video width="640" height="640" controls>
  <source src="https://melix.github.io/blog/img/jsolex2_2/animation.webm" type="video/webm">
Your browser does not support the video tag.
</video>
</div>
<div class="sect2">
<h3 id="_bonus">Bonus</h3>
<div class="paragraph">
<p>J&#8217;en profite enfin pour partager deux vidéos, à destination des débutants sur Sol&#8217;Ex, que j&#8217;ai faites récemment :</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://www.youtube.com/watch?v=NsDgg4o2SDw">Trouver le soleil sans chercheur solaire</a></p>
</li>
<li>
<p><a href="https://www.youtube.com/watch?v=8lWXcPG16I0">Régler exposition, gain et binning</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_ressources">Ressources</h3>
<div class="ulist">
<ul>
<li>
<p><a href="https://github.com/melix/astro4j">JSol&#8217;Ex</a> (téléchargement)</p>
</li>
<li>
<p><a href="https://melix.github.io/astro4j/latest/fr/jsolex.html">JSol&#8217;Ex</a> (documentation)</p>
</li>
<li>
<p><a href="http://valerie.desnoux.free.fr/inti/">INTI</a> (logiciel officiel)</p>
</li>
<li>
<p><a href="http://www.astrosurf.com/solex/sol-ex-traitement.html">Sol&#8217;Ex</a> (site officiel Sol&#8217;Ex)</p>
</li>
<li>
<p><a href="https://en.wikipedia.org/wiki/Adaptive_histogram_equalization">CLAHE</a> (algorithme)</p>
</li>
<li>
<p><a href="https://en.wikipedia.org/wiki/Gamma_correction">Gamma correction</a> (algorithme)</p>
</li>
</ul>
</div>
</div>
</div>
</div></p>
  			<a href="/blog/2024/02-22-effondrement.html"><h1>Vers un effondrement civilisationnel ?</h1></a>
  			<p>22 February 2024</p>
			<p><em>Tags: </em>
		<a href="/blog/tags/ecologie.html">ecologie</a> 
	
		<a href="/blog/tags/climat.html">climat</a> 
	
		<a href="/blog/tags/politique.html">politique</a> 
	
		<a href="/blog/tags/civilisation.html">civilisation</a> 
	</p>
			
  			<p><div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>Coucher des mots sur le papier, aussi numérique soit-il, est une forme de thérapie : faire sortir ce qui doit sortir, organiser ses idées, prendre le temps de la réflexion, se rassurer parfois.
Prédire le futur est bien évidemment impossible, mais il y a des ressentis, des signaux plus ou moins faibles, qui peuvent nous donner une idée de ce qui nous attend.
Ce billet n&#8217;a aucune prétention scientifique, il s&#8217;agit plutôt d&#8217;une synthèse des nombreuses sources que j&#8217;ai lues ou visionnées sur le sujet au cours des dernières années.
Au centre de ce texte, une interrogation : est-on en train d&#8217;assister à la fin de notre civilisation ?
Après tout, l&#8217;Histoire est faite de disparitions de civilisations, pourquoi la nôtre survivrait plus qu&#8217;une autre ?
En trame de fond, la question qui me préoccupe le plus : a-t-on déjà scellé le sort de nos enfants ?
A qui s&#8217;adresse ce billet ?
A ma famille et mes amis, probablement.
À mes enfants, sûrement, pour exprimer mes regrets, mes craintes, mais aussi mon espoir envers eux.
Enfin à tous celles et ceux qui devraient le lire mais qui ne le feront jamais, certainement.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_la_genèse">La genèse</h2>
<div class="sectionbody">
<div class="paragraph">
<p>J&#8217;ai une sensibilité à la fois sur les sujets écologiques et scientifiques depuis ma jeunesse.
Je me souviens encore des conversations avec mon copain Erwan, au collège.
Nous arrivions tôt le matin, bien avant le début des cours, et avions entre autres de longues conversations sur la Terre et comment la sauver.
A l&#8217;époque, nous ne parlions pas de réchauffement climatique : les sujets tournaient essentiellement autour de la pollution, du trou dans la couche d&#8217;ozone, de la disparition des papillons de nuit ou des ours polaires.</p>
</div>
<div class="paragraph">
<p>Dans ce terreau fertile aux idées dites écologistes, j&#8217;étais biberonné aux séries SF, et en particulier par Star Trek, série humaniste qui m&#8217;a profondément marqué.
Il en est ressorti une double culture, à la fois la prise en compte de la sauvegarde de l&#8217;environnement, mais aussi un profond respect pour la science et ce qu&#8217;elle permet d&#8217;expliquer du monde.
J&#8217;aime la rigueur de la démarche scientifique, ainsi que la capacité à se remettre en question, en opposition aux points de vue dogmatiques que l&#8217;on trouve par exemple dans les religions.
Agnostique, j&#8217;ai cherché mes réponses dans la science et continue de le faire aujourd&#8217;hui, notamment en appliquant le principe du <a href="https://fr.wikipedia.org/wiki/Rasoir_d%27Ockham">rasoir d&#8217;Okham</a>.</p>
</div>
<div class="paragraph">
<p>J&#8217;avais déja sur ce blog abordé le sujet <a href="https://melix.github.io/blog/2022/07/je-suis-le-gars-chiant.html">du rationnel et des reproches qu&#8217;on m&#8217;en a fait</a>.
Cette rationalité est aussi celle qui me pousse à écrire et partager mon angoisse : lorsqu&#8217;on a un "esprit scientifique" et que l&#8217;on a les informations dont on dispose aujourd&#8217;hui, il est difficile, voire impossible d&#8217;être optimiste.
Pire, il est difficile d&#8217;imaginer autre chose qu&#8217;un effondrement pur et simple de notre société.
Cette prise de conscience, ce pessimisme, doit se convertir en énergie, en action.</p>
</div>
<div class="paragraph">
<p>Précisons cependant que lorsque je parle d&#8217;effondrement civilisationnel, je me moque éperdument des fantasmes de l&#8217;extrême-droite sur le grand remplacement (culturel), de leur racisme, de leur xénophobie : je suis à l&#8217;opposé de tout cela, pour moi la "tradition chrétienne de la France" n&#8217;est qu&#8217;une vaste blague à l&#8217;échelle de l&#8217;Humanité et je suis de ceux qui pensent que l&#8217;égalité des droits n&#8217;est pas négociable, quelle que soit son origine, son orientation sexuelle ou politique.</p>
</div>
<div class="paragraph">
<p>Non, je parle ici d&#8217;un effondrement de notre mode de vie basé sur la consommation, la propriété privée et la mondialisation : je parle de la disparition possible de la démocratie et du retour de la guerre et des horreurs qui vont avec.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_de_quoi_parle_t_on">De quoi parle-t-on ?</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Une fois que vous <em>savez</em> ce qui se passe au niveau climatique, il n&#8217;y a que trois options possibles : le renoncement, le cynisme ou l&#8217;action.
Pour mes enfants, j&#8217;ai choisi d&#8217;agir : c&#8217;est notamment pour cela que je me suis lancé en politique, certes à un niveau local puisque limité aux municipales, il y a quelques années.
C&#8217;est aussi pour celà que je communique beaucoup sur les sujets écologique et politique, quitte à en agacer quelques uns.</p>
</div>
<div class="paragraph">
<p>Une des premières choses dont il faut prendre conscience, c&#8217;est l&#8217;urgence climatique.
Je discute souvent du réchauffement avec des personnes sensibilisées au sujet, mais paradoxalement, rares sont ceux qui ont vraiment conscience de l&#8217;urgence de la situation.
Au contraire, on entend dire que les écolos sont pénibles, le RN va même jusqu&#8217;à affirmer que <a href="https://www.lepoint.fr/politique/climat-le-depute-rn-thomas-menage-accuse-le-giec-d-exagerer-21-08-2023-2532248_20.php">le GIEC exagère</a>.
Rappelons que le GIEC est un organe international qui synthétise les conclusions de centaines d&#8217;études et que de part la nature extrêmement politique de ses rapports, c&#8217;est précisément plutôt l&#8217;inverse qui se produit, avec des rapports qui proposent différents scénarios, les politiques préférant regarder les plus optimistes.</p>
</div>
<div class="paragraph">
<p>Récemment, Jean-Marc Jancovici, spécialiste mondial du sujet, inventeur du concept de "bilan carbone" était <a href="https://www.youtube.com/watch?t=1497&amp;v=G3-L9UtBP78&amp;feature=youtu.be">auditionné au Sénat</a> devant des élus parfois médusés par ses réponses.</p>
</div>
<div class="quoteblock">
<blockquote>
1.5 degrés, c&#8217;est mort. 2 degrés, sauf chute de comète ou effondrement économique, c&#8217;est parti pour être mort.
</blockquote>
<div class="attribution">
&#8212; Jean-Marc Jancovici<br>
<cite>Audition au Sénat du 12 Février 2024</cite>
</div>
</div>
<div class="paragraph">
<p>Pourtant, aucune des affirmations de Jancovici, dont je me sens proche idéologiquement au moins sur ces sujets, ne devraient être surprenantes : on le sait depuis longtemps, les rapports s&#8217;enchaînent, mais l&#8217;inaction persiste.</p>
</div>
<div class="paragraph">
<p>Une grosse partie du problème est qu&#8217;il est difficile pour un être humain, de quantifier par nos simples sens une augmentation de 2 degrés.
Aujourd&#8217;hui encore, une canicule est systématiquement illustrée par des vacanciers à la plage, là où on devrait montrer des ruisseaux asséchés, des forêts qui partent en fumée, des personnes âgées en détresse, des agriculteurs qui ne peuvent plus arroser leurs cultures.</p>
</div>
<div class="paragraph">
<p>Il est important de comprendre que 2 degrés, c&#8217;est une moyenne mondiale : le réchauffement est plus important dans certaines zones de la planète (les pôles par exemple) et moins dans d&#8217;autres.
Une différence de 2 degrés à l&#8217;échelle planétaire, c&#8217;est 3 ou 4 degrés en plus en France (en 2022, nous avons atteint <a href="https://www.ecologie.gouv.fr/impacts-du-changement-climatique-atmosphere-temperatures-et-precipitations">+2.7⁰</a>)
Entre -1.8 et -18 degrés, c&#8217;est précisément <a href="https://wp.unil.ch/geoblog/2022/07/quel-temps-faisait-il-il-y-a-20-000-ans/">ce qui séparait l&#8217;ère glacière de l&#8217;ère pré-industrielle</a>.
A l&#8217;époque, nous avions des glaciers de plusieurs centaines de mètres de haut, l&#8217;Angleterre était reliée au continent (les océans étaient 120 mètres plus bas).
Si une si petite différence de température pouvait provoquer une telle conséquence, imaginez ce que 2 ou 3 degrés en plus pourraient donner.
Précisément, on a du mal à s&#8217;imaginer, et c&#8217;est pour celà que le GIEC établit des scénarios, des prédictions.
Ainsi, il est plutôt rassurant que <a href="https://bonpote.com/pourquoi-le-gouvernement-a-raison-de-preparer-la-france-a-4-degres/">la France se prépare à un scénario à +4⁰</a>.</p>
</div>
<div class="paragraph">
<p>Pourtant, lorsque la France est touchée par une "<a href="https://www.tf1info.fr/meteo/meteo-baisse-des-temperatures-en-france-peut-on-reellement-parler-de-vague-de-froid-2281908.html">vague de froid</a>" (je le mets entre guillemets parce que ces vagues sont moins fréquentes et moins fortes qu&#8217;il y a 20 ans), nous retrouvons ces réflexes climatosceptiques, en confondant météo (temps court) et climat (temps long).</p>
</div>
<div class="paragraph">
<p>Aujourd&#8217;hui nous sommes, mondialement, au niveau de la barre des 1.5 degrés et les conséquences au niveau local se font déja sentir :</p>
</div>
<div class="ulist">
<ul>
<li>
<p>en Espagne, des sécheresses à répétition ont annihilé les capacités agricoles du pays. Le <a href="https://www.liberation.fr/environnement/agriculture/canicule-et-agriculture-lespagne-ne-pourra-plus-etre-le-verger-de-leurope-20230721_EY7ECPTN5JBE3IQRHQFJXMXOWQ/?utm_medium=Social&amp;utm_source=Facebook&amp;xtor=CS7-50-#Echobox=1689965095">verger de l&#8217;Europe</a> va disparaître. Le sud de la France commence à souffrir des mêmes déréglements.</p>
</li>
<li>
<p>en Catalogne, cette même sécheresse <a href="https://www.courrierinternational.com/article/espagne-secheresse-la-catalogne-va-declarer-l-etat-d-urgence">menace l&#8217;approvisionnement en eau potable de millions d&#8217;habitants</a></p>
</li>
<li>
<p>en France, des événements climatiques de plus en plus extrêmes <a href="https://www.letemps.ch/monde/europe/les-inondations-a-repetition-mettent-le-nord-de-la-france-face-a-des-questionnements-vertigineux">menacent populations et industries</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>A 1.5 degrés, nous avons déja scellé le destin de pays entiers.
Les îles Tuvalu, par exemple, vont disparaître.
Ce pays est le premier du monde à avoir signé un <a href="https://www.geo.fr/environnement/australie-offre-asile-climatique-aux-citoyens-de-tuvalu-deplaces-par-la-montee-des-eaux-217488">accord d&#8217;asile climatique avec l&#8217;Australie</a>.
Imaginez-vous votre pays entier disparaître ?
Ceci nous semble lointain, pourtant c&#8217;est la réalité que sont en train de vivre des millions de personnes dans le monde : leur existence même est menacée.
Que feriez-vous si vous ne pouviez, physiquement, plus vivre en France ?
Laissez-moi penser que les obsessions migratoires de politiciens et autres <a href="https://www.telerama.fr/ecrans/dereglement-climatique-cnews-revele-les-impostures-du-giec-7009720.php">consultants du bar du coin</a> sont d&#8217;un tel ridicule comparé à ce qui nous attend&#8230;&#8203;</p>
</div>
<div class="paragraph">
<p>Nous sommes en avance sur les 1.5 degrés prévus par le GIEC: <a href="https://www.france24.com/fr/info-en-continu/20240208-r%C3%A9chauffement-climatique-l-ann%C3%A9e-2024-d%C3%A9bute-par-de-nouveaux-records">pour la première fois, les +1.5⁰ ont été dépassés pendant 12 mois consécutifs</a>.</p>
</div>
<div class="paragraph">
<p>A 2 degrés, nous savons déjà que la sécurité alimentaire ne sera plus assurée, que des conflits liés aux migrations climatiques vont éclater, pour l&#8217;accès aux ressources et pour justement empêcher les migrations de personnes qui cherchent simplement à survivre.
Fantasme ? Regardez par exemple <a href="https://www.rfi.fr/fr/podcasts/le-monde-en-questions/20230603-afghanistan-iran-vers-une-guerre-de-l-eau">ce qui se passe entre l&#8217;Iran et l&#8217;Afghanistan pour l&#8217;accès à l&#8217;eau potable</a>.</p>
</div>
<div class="paragraph">
<p>A 2.5 degrés, certaines régions du monde, en particulier en zone tropicale, deviennent inhabitables.
Les rassuristes avancent que l&#8217;homme a toujours su s&#8217;adapter, mais <a href="https://bonpote.com/rapport-de-synthese-du-giec-chaque-dixieme-de-degre-compte/">il existe cependant des limites physiologiques</a>, la réalité scientifique s&#8217;impose à tous.
Au-delà d&#8217;un certain seuil, la combinaison de la température et de l&#8217;humidité ambiante <a href="https://www.ouest-france.fr/leditiondusoir/2020-08-18/35-degres-de-temperature-humide-ce-seuil-mortel-pour-lhomme-nest-plus-une-fiction-af85e33a-7375-4821-b475-da6855c9c3ac">rend inefficace le mécanisme de transpiration</a>.
Nous mourrons, il ne s&#8217;agit pas d&#8217;une opinion, mais d&#8217;une réalité devenue tristement célèbre l&#8217;été dernier <a href="https://www.sudouest.fr/culture/musique/une-jeune-femme-de-23-ans-meurt-pendant-le-concert-de-taylor-swift-au-bresil-17512330.php">lors d&#8217;un concert de Taylor Swift</a>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_de_la_difficulté_des_ordres_de_grandeur">De la difficulté des ordres de grandeur</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Un des problèmes majeurs du réchauffement climatique est qu&#8217;il est, même en étant sensible au sujet, difficile de se rendre compte des ordres de grandeur.
J&#8217;étais par exemple déjà sensibilisé au sujet, mais, malgré tout, je continuais à prendre l&#8217;avion en particulier pour mon travail.
Je savais que l&#8217;avion était mauvais pour le climat, mais je n&#8217;avais aucune idée d&#8217;à quel point : on <em>sait</em> que c&#8217;est mauvais, mais rares sont ceux qui nous donnent les ordres de grandeur.
On se retrouve ainsi avec des politiques qui nous incitent à éteindre nos appareils en veille mais nous proposent de faire un aller-retour à Rome pour 100€ ou moins par avion !
Des non-sens écologiques, mais pas économiques : un aller-retour Paris-Dubaï par exemple, c&#8217;est l&#8217;équivalent de votre budget carbone annuel selon les accords de Paris !
Des <a href="https://co2.myclimate.org/fr/flight_calculators/new">outils existent désormais pour évaluer votre impact</a> et des activistes comme <a href="https://bonpote.com/10-chiffres-a-connaitre-sur-lavion-et-le-climat/">Bon Pote font un excellent travail pour décrire les problèmes inhérents à l&#8217;industrie aéronautique</a>.</p>
</div>
<div class="paragraph">
<p>Habitué des conférences à l&#8217;international pour mon travail, ma prise de conscience sur ce sujet particulier fut aussi tardive que brutale. J&#8217;en ai ai encore honte.
J&#8217;ai cependant pris la décision, voici un peu plus de 4 ans, de ne plus prendre l&#8217;avion et de n&#8217;assister qu&#8217;aux conférences auxquelles je peux me rendre par train.
C&#8217;est pourtant un vœux pieux, puisque je reste un être humain : que ferais-je lorsque mon entreprise me donnera le choix entre prendre la porte ou donner une conférence à San Francisco, ou une réunion de travail au Maroc ?
Ce problème est aussi sujet de tensions familiales, entre les vœux légitimes de "voyager", d&#8217;explorer le monde et ses merveilles, et mon obstination à dire non.
Combien de temps résisterais-je à cette pression ?
Une bonne partie de ma carrière s&#8217;est construite sur le fait de rencontrer des experts de mon domaine à l&#8217;étranger, mais aussi à partager mes connaissances : je suis le fruit du réchauffement climatique.
Quelle légitimité ai-je à vous "faire la morale" et vous demander, à vous, d&#8217;y renoncer ?
Qui suis-je pour refuser ce que j&#8217;ai moi-même fait ?</p>
</div>
<div class="paragraph">
<p>Je n&#8217;ai pas de bonne réponse à cette question, si ce n&#8217;est de faire appel à votre sensibilité.
D&#8217;autre part, je ne serai pas de ceux qui vous jugent pour vos choix : je suis le premier plein de contradictions et nous faisons, chacun, nos choix en fonction de ce que nous savons à un instant T, de nos contraintes, et finalement de nos convictions.
Pour certaines décisions, nous <em>avons le choix</em> et certaines décisions seront plus faciles à prendre pour <em>vous</em> que pour moi, et inversement !</p>
</div>
<div class="paragraph">
<p>Il est bien plus facile pour un citadin de se séparer de son SUV que pour quelqu&#8217;un qui n&#8217;a pas accès aux transports au commun en zone rurale.
Inversement, manger local et faire travailler producteurs locaux est plus simple pour un rural qu&#8217;un citadin.
Chacun de nous, à notre échelle, faisons des choix qui nous semblent opportuns compte-tenu de nos situations personnelles.</p>
</div>
<div class="paragraph">
<p>Prenons donc ces ordres de grandeur en exemple.
Pour respecter les accords de Paris et limiter le réchauffement climatique à 2 degrés, notre empreinte carbone, par personne, doit tomber à 2 tonnes par an.
A ce jour, les estimations varient, mais l&#8217;empreinte carbone d&#8217;un français est de l&#8217;ordre de 10 tonnes par an.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="/blog/img/climate/empreinte-carbone.webp" alt="empreinte carbone">
</div>
</div>
<div class="paragraph">
<p>En France, 31% des émissions sont liées au transport, donc à la voiture individuelle et aux transports de marchandises, c&#8217;est dire si le sujet de la voiture est important.
Pourtant, que constate-t-on ?
L&#8217;automobile est le <a href="https://car-use.org/la-publicite-dans-lautomobile-hier-et-aujourdhui/">2d plus gros contributeur à la publicité en France</a>, avec environ 1500€ de budget communication <em>par voiture</em>.
Notre Président <a href="https://www.numerama.com/sciences/1519938-emmanuel-macron-aime-la-bagnole-ce-nouveau-rapport-sur-le-climat-lui-donne-tort.html">aime la bagnole</a> et envoie un message désastreux.
Bruno Le Maire, devant trouver 10 milliards d&#8217;économies, <a href="https://www.huffingtonpost.fr/economie/article/le-gouvernement-coupe-10-milliards-d-euros-dans-son-budget-l-environnement-contribue-pour-20_230180.html">choisit de le faire sur l&#8217;environnement et les mobilités</a>.
En clair, on nous vend des voitures au lieu de <a href="https://www.v-logistique.com/2021-10-22/le-velo-vs-la-voiture-un-ecart-colossal-d-emissions-de-co2">nous vendre des vélos électriques, dont l&#8217;empreinte carbone est 20 fois inférieure</a>.</p>
</div>
<div class="paragraph">
<p>Ce <a href="https://ourworldindata.org/grapher/co-emissions-per-capita?time=2022">site</a> montre l&#8217;évolution de l&#8217;empreinte carbone par tête et par pays, depuis le début de l&#8217;ère industrielle.
Il y a 2 choses importantes à comprendre :</p>
</div>
<div class="ulist">
<ul>
<li>
<p>l&#8217;empreinte carbone est directement corrélée au niveau de vie des habitants. Plus on est riche, plus on consomme. Plus on consomme, plus notre empreinte est forte. L&#8217;empreinte carbone est 10 à 50 fois plus forte dans les pays industrialisés qu&#8217;en Afrique. Ainsi, il est complètement faux d&#8217;affirmer, <a href="https://vert.eco/articles/au-mepris-du-reel-nicolas-sarkozy-agite-la-menace-dune-explosion-demographique-pour-expliquer-la-crise-climatique">comme Nicolas Sarkozy</a>, que la crise démographique est responsable de la crise climatique. Ça n&#8217;est pas le nombre de personnes qui compte, mais leur capacité à consommer. Diminuer la population serait donc une solution&#8230;&#8203; à condition de le faire dans les pays développés !</p>
</li>
<li>
<p>l&#8217;empreinte carbone est essentiellement impactée par la consommation d&#8217;énergies fossiles (pétrole et charbon). C&#8217;est ce qui explique que l&#8217;empreinte carbone d&#8217;un français est plus faible que celle d&#8217;un allemand ou d&#8217;un polonais : là où ils utilisent des centrales à charbon pour se chauffer et faire tourner leurs industries, nous avons des centrales nucléaires.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Sur ce sujet du nucléaire, soyons clairs : je suis écolo et pour.
Lorsqu&#8217;on connaît ces ordres de grandeurs, lorsqu&#8217;on sait qu&#8217;environ 240 000 personnes meurent en Europe tous les ans à cause de la pollution atmosphérique principalement liée à la combustion de charbon, la position écologique anti-nucléaire traditionnelle est difficilement tenable.
Cette position anti-nucléaire, je l&#8217;avais de part de mes lectures lorsque j&#8217;étais gamin (Pif&#8217;Gadget, Greenpeace, des positions essentiellement liées à la peur du nucléaire, des accidents et de leurs terribles conséquences.
Ça, c&#8217;était avant d&#8217;avoir pris le temps d&#8217;étudier le sujet.
J&#8217;ai depuis largement révisé ma position et suis convaincu qu&#8217;on ne pourra pas s&#8217;en sortir sans nucléaire.
Il d&#8217;ailleurs assez ironique de constater que <a href="https://theconversation.com/tchernobyl-35-ans-apres-laccident-nucleaire-decouvrez-comment-la-nature-y-a-repris-ses-droits-118082">la biodiversité a fortement augmenté à Tchernobyl</a>, depuis que la zone n&#8217;est plus occupée, de quoi être optimiste sur la résilience des écosystèmes si nous devions disparaître !</p>
</div>
<div class="paragraph">
<p>Ceci ne veut pas dire qu&#8217;on ne peut pas développer les énergies renouvelables, bien au contraire, mais il faut encore une fois avoir les ordres de grandeur en tête.
Vous trouverez des chiffres différents selon les estimations plus ou moins pessimistes (notamment le <a href="https://fr.wikipedia.org/wiki/Facteur_de_charge_(%C3%A9lectricit%C3%A9)">facteur de charge</a>), mais il faut comprendre que pour remplacer 1 seul réacteur nucléaire, il faut <a href="https://www.liberation.fr/checknews/2018/06/07/est-il-vrai-qu-il-faudrait-7000-eoliennes-pour-remplacer-fessenheim_1656464/">environ 1000 éoliennes</a> ou <a href="https://fr.quora.com/Combien-de-panneaux-solaires-faut-il-en-moyenne-pour-remplacer-une-centrale-nucl%C3%A9aire">55 km² de panneaux solaires</a>.
Nous avons 56 réacteurs en France&#8230;&#8203;
Sans réduire notre consommation électrique, ceci signifie que nous devons exacerber encore plus la concurrence pour l&#8217;occupation des sols : doit-on s&#8217;en servir pour produire de la nourriture, de l&#8217;énergie, du logement ou la laisser libre pour la biodiversité ?</p>
</div>
<div class="paragraph">
<p>Est-il dès lors si surprenant que l&#8217;Allemagne ait dù <a href="https://www.youtube.com/watch?v=V0rdohof74A">raser des villages entiers pour exploiter le charbon nécessaire à la remise en marche de ses centrales</a> ?
Une bombe climatique !
Doit-on ensuite s&#8217;étonner que ces exemples soient repris par les réactionnaires pour décrédibiliser <em>toute</em> action de protection de l&#8217;environnement ?</p>
</div>
<div class="paragraph">
<p>Voilà le noeud du problème : notre société moderne est bâtie sur la consommation <em>massive</em> d&#8217;énergie, en particulier du pétrole, et à moins de réduire drastiquement cette consommation, nous ne pourrons tenir nos engagements.
A l&#8217;heure actuelle, il faudrait réduire de 5% par an notre consommation d&#8217;énergies fossiles pour y arriver.
Cette consommation étant directement corrélée à la sacro-sainte croissance, il s&#8217;agit ni plus ni moins que d&#8217;avoir l&#8217;équivalent d&#8217;un COVID, tous les ans !
Nos politiques <a href="https://www.liberation.fr/environnement/climat/inaction-climatique-de-la-france-les-associations-de-laffaire-du-siecle-saisissent-le-conseil-detat-20240222_ECKH6LZXRVBIHF3DUL3J3M6SQQ/">ont déja renoncé, personne n&#8217;étant prêt aux sacrifices que celà implique</a>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
On m&#8217;a posé la question de la chaîne d&#8217;approvisionnement d&#8217;uranium, qui peut être problématique. C&#8217;est vrai, mais uniquement si nous restons à cette génération de réacteurs. La 4ème génération, les <a href="https://fr.wikipedia.org/wiki/Surg%C3%A9n%C3%A9ration">surgénérateurs</a> sont capables d&#8217;utiliser les produits dérivés de la fission et nous donnent suffisamment de ressources pour des siècles de consommation. Pourtant, ce sont tous les expérimentateurs qui ont été mis à l&#8217;arrêt (<a href="https://fr.wikipedia.org/wiki/Superph%C3%A9nix">Superphénix</a> ou <a href="https://fr.wikipedia.org/wiki/Astrid_(r%C3%A9acteur)">Astrid</a>). Un gâchis dénoncé par <a href="https://www.youtube.com/watch?v=L0ZX3moD_mQ">Yves Bréchet lors de son audition au Sénat</a>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>De sacrifices, pourtant, c&#8217;est de cela qu&#8217;il s&#8217;agit.
Sacrifier nos générations futures, ou sacrifier notre mode de vie.
Nous vivons toujours selon le mythe d&#8217;une croissance infinie : toute notre société est bâtie sur ce seul concept économique qui n&#8217;a aucun sens physique.
La réalité physique des choses est pourtant implacable : il n&#8217;existe pas de croissance infinie dans un monde fini.
Là encore, il est indispensable de parler d&#8217;ordres de grandeur : une croissance à 2% signifie un doublement de la valeur tous les 36 ans.
Qui dit valeur dit production, dit consommation d&#8217;énergie, dit impact sur l&#8217;environnement.</p>
</div>
<div class="paragraph">
<p>Dit autrement, la croissance est une courbe exponentielle : il s&#8217;agit du genre de courbes que l&#8217;on ne souhaite pas voir.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="/blog/img/climate/annual-co2-emissions-per-country.png" alt="annual co2 emissions per country">
</div>
</div>
<div class="paragraph">
<p>N&#8217;est-il pas inquiétant de constater que dans ce graphique, des crises majeures comme les chocs pétroliers des années 70 ou le COVID n&#8217;ont eu que peu ou pas d&#8217;influence sur notre consommation ?</p>
</div>
<div class="paragraph">
<p>Une autre visualisation de la notion d&#8217;exponentielle, c&#8217;est celle des anomalies de température, produite par la NASA.
Une animation que je trouve particulièrement efficace pour comprendre l&#8217;effet d&#8217;emballement :</p>
</div>
 <video width="800" height="480" controls>
  <source src="https://melix.github.io/blog/img/climate/temp_spiral.webm" type="video/webm">
Your browser does not support the video tag.
</video>
<div class="paragraph">
<p>Cette exponentielle explique pourquoi le développement des énergies renouvelables ne s&#8217;est pas faite au détriment des énergies fossiles : elle s&#8217;est faite essentiellement en <em>complément</em>, parce que nous avons toujours besoin de plus d&#8217;énergie pour maintenir cette croissance.</p>
</div>
<div class="paragraph">
<p>Ainsi, si la consommation de charbon dans la production énergétique mondiale baisse en pourcentage, <a href="https://www.connaissancedesenergies.org/charbon-un-nouveau-pic-de-la-consommation-mondiale-attendu-en-2023-et-apres-240108">le volume n&#8217;a jamais été aussi élevé</a> !
Une mauvaise nouvelle à cependant relativiser, puisque <a href="https://www.latribune.fr/climat/energie-environnement/pour-la-premiere-fois-l-aie-anticipe-une-baisse-structurelle-de-la-demande-mondiale-de-charbon-985771.html">la production de charbon baisse</a> : en effet, dans des pays tels que l&#8217;Allemagne, les renouvelables sont destinés à remplacer les centrales à charbon.</p>
</div>
<div class="paragraph">
<p>Le problème des courbes comme celles-ci est que les prévisions deviennent presque impossible à formuler, on entre dans le domaine de l&#8217;inconnu, et les esprits scientifiques comme moi n&#8217;aiment pas cela.
<a href="https://fr.wikipedia.org/wiki/Serge_Zaka">Serge Zaka</a>, docteur en agroclimatologie, décrit des <a href="https://www.facebook.com/permalink.php?story_fbid=pfbid0263SryV9KtpZ6TARDW6uZtf2xGbWq3J5szZ3kJqzx1tw1jhNDGTp6rxBKbMVMeFc1l&amp;id=61550647585914">phénomènes de réchauffement des océans</a> statistiquement impossibles (autrement dit, les marges dépassent ce que la statistique classique considère comme possible).</p>
</div>
<div class="paragraph">
<p>Cette question de la croissance, pourtant, est au cœur de notre survie.
Attention, je ne parle pas de la survie de l&#8217;espèce, ni même de "sauver la planète".
En effet, même en étant pessimiste, je pense que l&#8217;espèce humaine survivra.
En revanche, ne comptez pas sur moi pour vous dire <em>combien</em> survivront : mon intuition, compte-tenu des paramètres dont nous parlons ici, est que nous risquons de voir une nouvelle crise majeure.
Et quand bien même l&#8217;espèce humaine ne survivrait pas, la vie, elle, continuera sans nous : elle existait avant, elle existera après.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_cest_lhistoire_dun_skieur_qui_se_répétait_jusquici_tout_va_bien">C&#8217;est l&#8217;histoire d&#8217;un skieur qui se répétait "jusqu&#8217;ici tout va bien"</h2>
<div class="sectionbody">
<div class="imageblock text-center">
<div class="content">
<img src="/blog/img/climate/la-haine.jpg" alt="la haine" width="300">
</div>
</div>
<div class="paragraph">
<p>Pour prendre une analogie, nous sommes un peu dans la situation d&#8217;un skieur du dimanche : il descend sa piste, il à se sent à l&#8217;aise.
Il accélère, prend plaisir, jusqu&#8217;à se rendre compte qu&#8217;il a pris trop de vitesse, que la pente est bien trop raide et qu&#8217;il ne peut plus maîtriser sa course.
En bas, un croisement, d&#8217;autres skieurs, il est trop tard pour s&#8217;arrêter et il n&#8217;y a que 2 solutions :</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>virer, se laisser tomber, quitte à se casser une jambe, pour éviter le groupe</p>
</li>
<li>
<p>continuer et entrer en collision, en entraînant de nombreuses autres personnes dans la chute et potentiellement de nombreuses victimes</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>M&#8217;est avis que beaucoup de personnes choisissent instinctivement la 2ème solution, parce que la première n&#8217;est pas confortable et que notre instinct de préservation nous joue des tours : incapable d&#8217;anticiper des conséquences encore pires à long terme, notre espèce se mure dans le déni et choisit la solution la moins logique.
Pire, notre tendance naturelle est, souvent paradoxalement de bonne foi, de déresponsabiliser.
Les exemples sont nombreux : mettre des radars automatiques au lieu d&#8217;apprendre à respecter les limites, demander aux enfants de mettre des gilets jaunes au lieu de sécuriser les routes, dire aux filles de se couvrir au lieu de demander aux garçons de cesser de les voir comme des objets sexuels, demander d&#8217;éteindre vos box internet au lieu de prendre votre vélo pour aller chercher du pain&#8230;&#8203;</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_rassurisme_et_techno_solutionnisme">Rassurisme et techno-solutionnisme</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Maintenant que le réchauffement climatique est palpable et subi par les plus sceptiques d&#8217;entre nous, un nouveau mal est en marche : le rassurisme.
Se substituant au climato-scepticisme, il consiste à affirmer que nous nous en sortirons toujours, que l&#8217;homme s&#8217;est toujours adapté, que nous trouverons des solutions techniques, et cætera, et cætera.
Le rassurisme est une plaie parce qu'<strong>il incite à l&#8217;inaction</strong>.
Agréable discours à entendre, il est le parfait compagnon du status quo, sous couvert de discours "de bon sens", mais aussi un risque encore plus grand pour l&#8217;avenir.
Je classe dans le rassurisme le discours techno-solutioniste que nous entendons de plus en plus.</p>
</div>
<div class="paragraph">
<p>Prenons par exemple l&#8217;idée souvent commentée de la séquestration du carbone : pourquoi ne pourrions-nous pas l&#8217;extraire de l&#8217;atmosphère ?
A priori, l&#8217;idée n&#8217;est pas idiote, si on peut le faire il serait idiot de s&#8217;en passer.
Pourtant, il suffit d&#8217;un tout petit peu de recherche pour se rendre compte des problèmes.
Lorsqu&#8217;on parle de concentrations de CO², nous parlons de <em>parties par million</em>.
Par exemple, 200ppm, ce sont 200 molécules de CO² sur 1 million : c&#8217;est une concentration extrêmement faible, mais qui a des effets dévastateurs.
Si vous avez quelques souvenirs de physique, je vous conseille d&#8217;ailleurs cette excellente <a href="https://www.youtube.com/watch?v=ewc8FBtEKPs">vidéo de Science Etonnante sur les mécanismes du réchauffement et le mythe de la saturation du réchauffement</a>.
Si tant est que nous disposions d&#8217;une technologie de "nettoyage", il faudrait brasser une quantité d&#8217;air phénoménale pour l&#8217;extraire et pour brasser cet air, il faudrait une quantité non négligeable d&#8217;énergie&#8230;&#8203;
En clair, il s&#8217;agit donc souvent plus de "coups de com'" d&#8217;entreprises cherchant avant tout à faire de l&#8217;argent sur le dos du climat, peu recommandables&#8230;&#8203; mais pour lesquels des investisseurs peuvent se laisser séduire.</p>
</div>
<div class="paragraph">
<p>Un autre exemple, c&#8217;est la <a href="https://www.capital.fr/economie-politique/pourquoi-les-projets-delon-musk-pour-rendre-mars-vivable-ne-sont-pas-concretement-faisables-158509">la colonisation de Mars</a>, annoncée par Elon Musk.
Peut-on être sérieux seulement 5 minutes ?
Il n&#8217;est pas surprenant que les seuls qui y croient soient des économistes, c&#8217;est avant tout le modèle de la fuite en avant : puisqu&#8217;on ne peut pas sauver notre planète, rendons-en une autre vivable !
L&#8217;idée est d&#8217;autant plus ridicule qu&#8217;on ne sait même pas contrôler le climat ici, en premier lieu lutter contre le réchauffement climatique, alors que dire lorsque l&#8217;on parle de changer le climat d&#8217;une planète dont on ne sait presque rien&#8230;&#8203;
C&#8217;est une chose que de vouloir fouler Mars du pied, s&#8217;en est une autre que de la terraformer.</p>
</div>
<div class="paragraph">
<p>Mais un des problèmes de la croissance et de l&#8217;évolution de la technologie et de l&#8217;information, c&#8217;est qu&#8217;elle rend possible des actions individuelles aux conséquences potentiellement catastrophiques, au premier rang desquelles la géoingénierie.
Ainsi, un <a href="https://climate.benjames.io/someone-is-going-to-dim-the-sun/">article particulièrement inquiétant</a> montre que nous disposons de moyens de diffuser économiquement du sulfure dans l&#8217;atmosphère, pour refroidir l&#8217;atmosphère'.
Même avec des conséquences terrifiantes, telles que des pluies acides, ou le simple fait qu&#8217;arrêter d&#8217;en diffuser entraînerait un réchauffement massif encore plus grand, le fait est que ça pourrait fonctionner en pratique.
Nous sommes donc en plein dans ce que j&#8217;expliquais plus haut : plutôt que de résoudre le problème à sa source, on continue, quitte à avoir des conséquences bien pires plus tard.
Lorsqu&#8217;une technologie est disponible, elle est utilisée.
La question n&#8217;est donc pas de savoir SI, mais QUAND elle sera utilisée, soit par un riche milliardaire qui souhaite continuer à faire du profit en dépit du bon sens, ou d&#8217;un Etat qui lutte pour sa survie.
Si vous vous rappelez de <a href="https://fr.wikipedia.org/wiki/Horloge_de_la_fin_du_monde">l&#8217;horloge de l&#8217;apocalypse</a>, il me semble qu&#8217;on se rapproche dangereusement de minuit&#8230;&#8203;</p>
</div>
<div class="paragraph">
<p>L&#8217;autre effet pervers du techno-solutionnisme, c&#8217;est que si tant est qu&#8217;il fonctionne, il n&#8217;incite pas à la sobriété.
Ainsi, toutes les évolutions technologiques qui ont permis de faire des économies n&#8217;ont in fine pas eu pour conséquence de réduire la consommation.
Par exemple, les moteurs thermiques sont aujourd&#8217;hui beaucoup plus efficaces qu&#8217;avant, mais les économies ont servi à augmenter l&#8217;autonomie ou à avoir des voitures plus grosses : c&#8217;est <a href="https://fr.wikipedia.org/wiki/Effet_rebond_(%C3%A9conomie)">l&#8217;effet rebond</a>.</p>
</div>
<div class="paragraph">
<p>Ainsi, toutes ces évolutions technologiques ne sont en pratique là que pour supporter un modèle de consommation constant.
Un autre exemple ?
Le rendement à l&#8217;hectare de la production agricole a été multiplié 3 depuis 1960, par plus de 10 depuis le début de l&#8217;ère industrielle :</p>
</div>
<iframe src="https://donnees.banquemondiale.org/share/widget?indicators=AG.YLD.CREL.KG" width='450' height='300' frameBorder='0' scrolling="no" ></iframe>
<div class="paragraph">
<p>On se rend bien compte du mensonge qui consiste à dire qu&#8217;il faut bien continuer ce modèle pour nourrir la planète : nous pourrions utiliser les gains de productivité à l&#8217;hectare pour nourrir plus de monde mais nous avons choisi de les investir dans des biocarburants pour faire rouler des voitures, ou dans de la production industrielle de produits transformés qui menacent notre santé.
Pour autant, les revenus des agriculteurs ne cessent de chuter, les famines n&#8217;ont pas disparu (essentiellement pour des questions de logistique) et les maladies cardiovasculaires explosent.
Nous produisons largement plus que ce que dont nous avons besoin pour survivre, mais nous "produisons de la croissance" en <em>transformant</em> les produits.
Là où au début du siècle, l&#8217;essentiel de la consommation se faisait du produit brut au consommateur, désormais l&#8217;essentiel se fait par des produits transformés.
L&#8217;abondance est illustrée par ce graphique représentant l&#8217;apport calorique par habitant :</p>
</div>
<div class="imageblock">
<div class="content">
<img src="/blog/img/climate/daily-per-capita-caloric-supply.png" alt="daily per capita caloric supply">
</div>
</div>
<div class="paragraph">
<p>A celles et ceux qui répondront que plus d&#8217;apport calorique c&#8217;est une meilleure santé, rappelons que nous avons besoin d&#8217;entre 2000 et 2500 calories par jour, un seuil qui a été franchi au début des années 1820.
Depuis, nous sommes bien au-delà, ce qui explique notamment l&#8217;explosion de l&#8217;obésité et des maladies cardiovasculaires (en combinaison avec la sédentarité permise par l&#8217;exploitation des machines).</p>
</div>
<div class="paragraph">
<p>Ainsi, la croissance n&#8217;est pas nécessairement synonyme de progrès : au delà d&#8217;un certain seuil, elle devient maladive et entraîne plus de maux que de bien.</p>
</div>
<div class="paragraph">
<p>Les prémisses de cette constatation ne datent pas d&#8217;hier, le <a href="https://www.rfi.fr/fr/connaissances/20220819-il-y-a-50-ans-le-rapport-meadows-posait-des-limites-%C3%A0-la-croissance">club de Rome</a> s&#8217;en faisait écho il y a 50 ans déja.
De nos jours, rares encore sont les économistes qui défendent la décroissance.
En France, des chercheurs comme <a href="https://www.seuil.com/ouvrage/ralentir-ou-perir-timothee-parrique/9782021508093">Timothée Parrique</a> montrent avec brio que la décroissance ne peut plus être considérée comme un gros mot.
Au contraire, elle devient nécessaire, comme le laisse entendre ce titre "ralentir ou périr".</p>
</div>
<div class="paragraph">
<p>Il ne faut pas non plus confondre le techno-solutionnisme avec l&#8217;utilisation des techniques permettant de limiter l&#8217;impact de notre consommation.
Certains outils seront indispensables, mais si nous devons répondre à une solution d&#8217;urgence, il est préférable de le faire avec les technologies dont on dispose, pas de celles dont on ne sait pas si elles seront disponibles dans 10 ans.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_pourquoi_un_effondrement">Pourquoi un effondrement ?</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Nous l&#8217;avons vu, la conjoncture n&#8217;est pas favorable, loin de là.
Nous savons, nos gouvernements savent, mais rien ne change.
N&#8217;était-ce pas Emmanuel Macron qui nous a <a href="https://www.lemonde.fr/election-presidentielle-2022/article/2022/04/16/emmanuel-macron-promet-a-marseille-un-second-mandat-qui-sera-ecologique-ou-ne-sera-pas_6122484_6059010.html">promis que son quinquennat "sera écologique ou ne sera pas"</a> ?
Nous avons la réponse : après le une <a href="https://www.ledauphine.com/environnement/2021/07/07/que-reste-t-il-des-propositions-de-la-convention-climat">convention citoyenne sur le Climat vidée de sa substance</a>, après <a href="https://www.huffingtonpost.fr/environnement/video/sur-les-pesticides-gabriel-attal-cede-a-une-revendication-des-syndicats-agricoles-contre-les-ong-ecologistes_230132.html">le sacrifice de l&#8217;écologie au profit des agroindustriels qui nous confortent dans ce modèle</a>, il n&#8217;y a a que du cynisme dans les décisions politiques.
Même au niveau local, dans ma commune, la majorité se gausse à coups de croissance verte, un concept qui ne parle qu&#8217;aux économistes et qui n&#8217;a <a href="https://www.polytechnique-insights.com/dossiers/economie/regards-croises-sur-la-decroissance-une-vision-departagee/la-croissance-verte-est-une-illusion/">jamais démontré le moindre succès</a>.
Encore une fois, il n&#8217;y a rien de surprenant : un niveau de base en mathématiques ou de physique suffit à comprendre qu&#8217;on ne peut faire de croissance sans sacrifier de ressources, ce qui se traduit soit par de la pollution, soit par du réchauffement climatique.
Dans ma commune, on <a href="https://mvea85.fr/sites/blog/2023_10_06_non_demenagement_leclerc">construit encore des supermarchés en périphérie comme dans les années 70</a> et on moque les écologistes "décroissants", "contre l&#8217;emploi" et "pour l&#8217;insécurité".
Qu&#8217;importe l&#8217;état catastrophique des cours d&#8217;eau, que l&#8217;eau doivent être importée de Loire-Atlantique pour subvenir aux besoins d&#8217;industries agroalimentaires locales bien connues, puisqu&#8217;on a la croissance !
Qu&#8217;importe que l&#8217;on doive construire sur des terres agricoles pour loger tous les néo-ruraux attirés par la croissance économique du territoire&#8230;&#8203;</p>
</div>
<div class="paragraph">
<p>Nous constatons là que malgré toutes les informations disponibles, nous sommes dans la situation du skieur qui ne peut plus s&#8217;arrêter; il y aura des dégâts !</p>
</div>
<div class="paragraph">
<p>Cependant, pas de quoi prophétiser un effondrement civilisationnel, me direz-vous.
Certes, mais il y a plus : c&#8217;est la conjonction de facteurs qui peut entraîner notre chute.</p>
</div>
<div class="paragraph">
<p>Nous avons mentionné que dans le dérèglement climatique, l&#8217;essentiel du problème était concentré autour des énergies fossiles.
Cependant, d&#8217;autres problèmes d&#8217;ampleur sont eux aussi liés à notre modèle de développement : l&#8217;effondrement de la biodiversité par exemple.
Nous sommes entrés dans une nouvelle phase d&#8217;extinction de masse, tellement bien documentée qu&#8217;elle porte un nom: <a href="https://fr.wikipedia.org/wiki/Extinction_de_l%27Holoc%C3%A8ne">l&#8217;extinction de l&#8217;Holocène</a> :</p>
</div>
<div class="imageblock">
<div class="content">
<img src="/blog/img/climate/global-living-planet-index.png" alt="global living planet index">
</div>
</div>
<div class="paragraph">
<p>En 50 ans, plus de la moitié du monde sauvage a disparu.
Je ne sais pas si vous vous rendez bien compte : l&#8217;homme est présent sur Terre depuis plus de 4 millions d&#8217;années, Homo Sapiens depuis 300000 ans environ, et en <strong>seulement 50 ans</strong>, nous avons détruit plus de la moitié des espèces.
Pour la biodiversité marine, la situation est encore pire, avec la surpêche, l&#8217;augmentation de la température et l&#8217;acidification des océans.
Depuis plus de 6 mois, nous vivons une véritable <a href="https://www.fondationdelamer.org/canicule-marine-une-catastrophe-silencieuse/">canicule marine</a>, mais qui en a entendu parler ?</p>
</div>
<div class="paragraph">
<p>Or, l&#8217;homme fait partie d&#8217;un écosystème : nous vantons notre adaptabilité, mais nous sommes les premiers dépendants de notre environnement.
Le détruire, c&#8217;est directement menacer notre survie : il faut être fou pour croire que l&#8217;homme peut survivre seul.</p>
</div>
<div class="paragraph">
<p>Devant l&#8217;opposition à la décroissance, ou même simplement les appels à la sobriété, les discours les plus réactionnaires sont en marche.
Il n&#8217;y a pas de quoi être optimiste, lorsqu&#8217;en France, un ministre <a href="https://basta.media/qui-sont-les-veritables-terroristes-de-l-environnement-ecoterroristes-Darmanin-Soulevements-de-la-terre-Zad-agrobusiness-multinationales-fossiles-criminels-climatiques">traite des militants écologistes d&#8217;éco-terroristes</a>, mais en même temps, soutient des agro-industriels qui <a href="https://www.lefigaro.fr/actualite-france/agriculteurs-en-colere-ce-que-l-on-sait-sur-l-incendie-d-un-batiment-de-la-mutualite-sociale-agricole-a-narbonne-20240126">mettent le feu à des mutuelles</a>&#8230;&#8203;
Là encore on pourrait croire à de l&#8217;ignorance, mais il s&#8217;agit d&#8217;un cynisme sans nom : tous savent pertinemment ce qui se profile, mais aucun n&#8217;a le courage politique pour faire ce qui est vraiment nécessaire : un nouveau modèle de société basé sur la sobriété.
Que dire d&#8217;un pays où l&#8217;on s&#8217;émeut plus facilement d&#8217;une boîte de soupe versée sur un tableau protégé derrière une vitre en verre, que de <a href="https://www.radiofrance.fr/franceculture/podcasts/la-revue-de-presse-internationale/la-revue-de-presse-internationale-emission-du-mardi-20-juin-2023-1146234">plusieurs centaines de morts en Inde suite à la canicule</a>&#8230;&#8203;
Pas vraiment de quoi être optimiste.</p>
</div>
<div class="paragraph">
<p>On pourrait s&#8217;arrêter là mais d&#8217;autres signaux sont tout aussi inquiétants.
Je rappelais par exemple à quel point notre société moderne est basée sur les énergies fossiles.
Le graphique ci-dessous montre par exemple la répartition de la consommation énergétique par filière :</p>
</div>
<div class="imageblock">
<div class="content">
<img src="/blog/img/climate/energie-par-filiere.png" alt="energie par filiere">
</div>
</div>
<div class="paragraph">
<p>La baisse en 2020 est liée au COVID, mais ne nous y trompons pas : à l&#8217;échelle mondiale, les énergies fossiles dominent : les renouvelables représentent une part croissante de la production, mais ne sont comparables qu&#8217;au parc nucléaire, les énergies fossiles sont largement dominantes.
Dans ce portrait, la situation du pétrole est plus critique : nous savons que les réserves s&#8217;épuisent.
Que l&#8217;on décide de s&#8217;en passer volontairement ou non, nous arriverons avant la fin du siècle à la fin du pétrole.</p>
</div>
<div class="paragraph">
<p>Or, dans de nombreux domaines, nous sommes complètement dépendants du pétrole, non pas en tant que source d&#8217;énergie, mais de matière première :</p>
</div>
<div class="ulist">
<ul>
<li>
<p>pharmacologie</p>
</li>
<li>
<p>agriculture (machines, mais aussi engrais)</p>
</li>
<li>
<p>santé</p>
</li>
<li>
<p>textiles</p>
</li>
<li>
<p>cosmétiques</p>
</li>
<li>
<p>&#8230;&#8203;</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Il ne vous aura pas échappé que l&#8217;Europe ne dispose pas ou peu de cette ressource.
Préférons-nous continuer à brûler ce qui nous reste pour voyager pour 500€ à l&#8217;autre bout du monde, ou pour produire notre nourriture et fabriquer nos médicaments ?
Mon choix est vite fait&#8230;&#8203;</p>
</div>
<div class="paragraph">
<p>A court ou moyen terme, la dépendance de l&#8217;Europe au pétrole signifiera un asservissement aux pays qui en disposent (si tant est qu&#8217;ils soient disposés à nous en vendre).
Sachant que ces pays ne sont pas ce qu&#8217;il y a de plus démocratique, la question du respect des droits humains pourrait à moyen terme devenir un vague souvenir.
Dès lors quels choix s&#8217;offriront à nous ? Entrer en guerre pour leur "voler" ces ressources ? Les forcer à nous en vendre ? A quel prix ? Comment ?</p>
</div>
<div class="paragraph">
<p>Le remplacement du pétrole en tant que source d&#8217;énergie est possible mais requiert une électrification massive de nos moyens de subsistance (transports, machines outils, industries, &#8230;&#8203;) et une relocalisation de la production, le transport maritime dépendant essentiellement de cette ressource.
Or, qui dit électrification dit augmentation de la production.
De quels moyens disposons nous pour remplacer une telle quantité d&#8217;énergie ?
L&#8217;écologie n&#8217;est jamais aussi mauvaise que lorsqu&#8217;elle ignore la réalité physique des choses.</p>
</div>
<div class="paragraph">
<p>Les pays qui disposent de ces ressources, donc, ne sont pas particulièrement amicaux.
Nous parlons de pays dont les actions récentes n&#8217;augurent pas d&#8217;un avenir radieux pour l&#8217;Europe, mais aussi pour leurs propres populations : la Russie, la Chine, &#8230;&#8203;
La Russie, qui ne cesse d&#8217;étendre son influence sur un continent Africain avide de "revanche" sur la colonisation et l&#8217;exploitation de leurs ressources par l&#8217;Occident.
Certes la Russie n&#8217;est pas animée par la bonté de réparer les erreurs de l&#8217;Occident, elle souhaite tout autant s&#8217;accaparer les ressources minières du continent et par là donc disposer de moyens de pression&#8230;&#8203; pour gagner sa <a href="https://www.institutmontaigne.org/expressions/le-monde-vu-dailleurs-le-choc-des-civilisations-une-version-russe">"guerre civilisationnelle"</a>, mais le message est passé, <a href="https://www.challenges.fr/entreprise/defense/l-armee-francaise-va-quitter-le-niger-apres-le-burkina-le-mali-et-la-centrafrique_868471">la France doit s&#8217;en aller</a> !</p>
</div>
<div class="paragraph">
<p>Cette guerre civilisationnelle, des gens comme moi y participent malgré eux.
Ceux qui me connaissent savent à quel point, notamment, je lutte contre mon envie de quitter mon métier.
A vrai dire, si je n&#8217;avais ni famille, ni crédits sur le dos (comme tout le monde), je crois que j&#8217;aurais déjà abandonné ce qui est pourtant une de mes passions.</p>
</div>
<div class="paragraph">
<p>En effet, en tant que développeur, non seulement je contribue massivement au réchauffement climatique (le numérique représente une part de la consommation d&#8217;énergie mondiale en explosion, notamment à cause de l&#8217;explosion du nombre de terminaux), mais j&#8217;ai aussi donné des outils de manipulation de masse, utilisés comme tels, par des puissances qui cherchent à nous déstabiliser.
Les réseaux sociaux, notamment, sont devenus de véritables poubelles où les idées complotistes, antivax, climatosceptiques sont promues bien plus que les autres.
Les idées dites "de droite" sont <a href="https://www.lemonde.fr/pixels/article/2021/10/22/une-etude-de-twitter-montre-que-son-algorithme-favorise-les-discours-de-droite_6099540_4408996.html">favorisées par les algorithmes de Twitter/X</a> et les <a href="https://www.lexpress.fr/monde/russie-doppelganger-la-vaste-operation-de-desinformation-de-moscou-pour-destabiliser-la-france-2G4K4U52PZDJ3IS6E6RABX4CRA/">manipulations de la Russie déstabilisent nos démocraties</a>.
Savoir que ce que je développe sert à l&#8217;effondrement de la société et à la propagation des idées les plus nauséabondes me rend malade.</p>
</div>
<div class="paragraph">
<p>Force est de constater que le populisme monte en flèche : il a gagné au Brésil (Bolsonaro), aux Etats-Unis (Trump), au Royaume-Uni (Jonhson), en Hongrie (Orban), aux Pays-Bas (Wilders), en Argentine (Milei).
Il faut être sacrément optimiste pour croire que la France puisse miraculeusement échapper à ce fléau.
Pour autant, une fois en place, nous savons ce que ces gouvernements pensent de l&#8217;économie et donc de l&#8217;écologie.
Pire, nous savons ce que ces personnes pensent du droit des femmes et plus largement de toute personne ne pensant pas comme eux.
Je vous invite d&#8217;ailleurs à écouter cette <a href="https://www.youtube.com/watch?v=B2SI1zMN5ho">interview de Véra Nikolski et Jancovici</a> sur la fin de l&#8217;ère du pétrole et ses conséquences sur la démocratie et le droit des femmes.</p>
</div>
<div class="paragraph">
<p>Les idées qui sont promues dans nos sociétés modernes sont incompatibles avec nos objectifs climatiques : nous devons tous travailler, devons être encore et toujours plus productifs.
Les outils que nous concevons, en informatique, font gagner de la productivité, mais cette productivité n&#8217;est pas rendue au travailleur pour du temps libre, elle est réinvestie en plus de croissance.</p>
</div>
<div class="paragraph">
<p>Produire, consommer, produire, consommer, produire&#8230;&#8203; "pouvoir d&#8217;achat" et zéro chômage érigés en totems.</p>
</div>
<div class="paragraph">
<p>Ce que je constate donc tous les jours est une fuite en avant, doublée d&#8217;un déni, mais pire encore, une réaction exactement inverse à ce qu&#8217;il faudrait faire pour maintenir notre consommation sous les <a href="https://fr.wikipedia.org/wiki/Limites_plan%C3%A9taires">limites planétaires</a>.
Dès lors, la question de l&#8217;effondrement civilisationnel se pose : si tant est que nous prenions le virage, qu&#8217;en est-il des pays qui ne le feront pas et auront la capacité à nous menacer, précisément parce qu&#8217;ils auront fait le choix inverse ?
C&#8217;est un dilemme auquel je n&#8217;ai pas de réponse, mais d&#8217;autres questions ne sont pas agréables à entendre :</p>
</div>
<div class="paragraph">
<p>Que ferons-nous lorsque les populations qui ne pourront plus vivre dans leur pays frapperont à notre porte ?
Que ferons-nous lorsque nous ne pourrons plus importer nos médicaments, faute de moyens de transport longue distance ?
Que ferons-nous lorsque l&#8217;Afrique nous demandera des comptes pour l&#8217;exploitation de ses ressources ?
Que ferons-nous si nous n&#8217;avons plus de pétrole pour faire rouler nos tanks, voler nos avions et nous défendre contre des pays en quête de conquêtes territoriale, économique ou culturelle ?
Que ferons-nous lorsque nous aurons tellement détruit nos services publics (transports, écoles, hôpitaux, production électrique) que nous serons dépendants de services commerciaux dont la seule survie ne dépend que de leurs marges ?</p>
</div>
<div class="paragraph">
<p>La mondialisation nous a paradoxalement mis dans une situation extrêmement précaire, l&#8217;Europe d&#8217;aujourd&#8217;hui est incroyablement fragile.
Tout ça au nom de la sacro-sainte croissance, un concept qui rappelons-le, n&#8217;a aucun sens physique, c&#8217;est une pure construction mathématique permettant d&#8217;évaluer l&#8217;activité économique d&#8217;un pays.</p>
</div>
<div class="paragraph">
<p>Or, l&#8217;activité économique ne se mesure pas qu&#8217;à l&#8217;aube de ce qui s&#8217;achète.
C&#8217;est pourtant ce que nous faisons tous les jours.
Ainsi, le comptable qui travaille bénévolement dans une association humanitaire fait le même travail que le comptable qui travaille dans une entreprise d&#8217;extraction de minerais.
L&#8217;un ne contribue pas au PIB, l&#8217;autre oui.
Leurs contributions au bien-être de l&#8217;humanité sont elles pour autant comparables ?</p>
</div>
<div class="paragraph">
<p>Se passer de la croissance n&#8217;est pas sans poser des problèmes, tant elle est au cœur de notre société.
Sans croissance, point de retraites, tout un monde de solidarité à réinventer !
Quelle entreprise accepterait <em>volontairement</em> de ne pas croître, alors que cela menacerait directement sa survie face aux concurrents qui, eux, prendront la décision de continuer ?</p>
</div>
<div class="paragraph">
<p>Pourtant, décroître l&#8217;industrie automobile, responsable d&#8217;une grande partie du réchauffement, de morts sur la route, de la pollution aux particules fines, ne serait que bénéfique pour notre société.
Nous ne parlons pas de la supprimer du jour au lendemain, mais de <em>planifier notre sortie</em>.
De même, l&#8217;opulence de agro-industrie devra disparaître, c&#8217;est une question de survie, au profit d&#8217;une agriculture raisonnée : produisons moins, mais de meilleure qualité, avec des revenus décents et moins de transformations.
A court terme, achetons des <a href="https://www.fairphone.com">Fairphone</a> plutôt que des <a href="https://www.apple.com/apple-vision-pro/">Vision Pro</a>, achetons des produits réparables plutôt que des produits pas chers mais écologiquement aberrants.
Les leviers sont nombreux, il faut "simplement" une volonté politique.
Réapprenons à mutualiser, nous pouvons inventer de nouveaux modèles basés sur la coopération.</p>
</div>
<div class="paragraph">
<p>Plus nous attendons, moins les mesures que nous devrons prendre seront socialement acceptables et plus le risque de révolution sera important.
Il n&#8217;est pas surprenant qu&#8217;on utilise l&#8217;expression d&#8217;écologie punitive, dans ce contexte, alors que le plus punitif, ce sont les conséquences directes de la surexploitation de notre environnement : inondations, sécheresses, maladies, incendies, &#8230;&#8203;
La punition est vécue de plein fouet par les agriculteurs qui perdent leurs récoltes, des entrepreneurs qui voient leur camping partir en fumée, des habitants qui voient leur habitation détruite par des inondations ou des tornades&#8230;&#8203;</p>
</div>
<div class="paragraph">
<p>En conclusion, tout semble converger vers l&#8217;idée d&#8217;un crash massif à venir : c&#8217;est la combinaison du réchauffement climatique, de l&#8217;effondrement de la biodiversité, du mythe de la croissance infinie, de la montée du populisme et de la raréfaction des ressources fossiles qui rend cet avenir possible.</p>
</div>
<div class="paragraph">
<p>Jamais ne n&#8217;aurais pensé, lorsque je discutais dans cette cour de récréation, voir cela de mon vivant.</p>
</div>
<div class="paragraph">
<p>Désormais, non seulement je le vois venir mais je le vois de plus en plus probable.
Je ne saurais quantifier, mais pour moi nous sommes sortis du domaine du possible pour entrer dans celui du probable.
Je n&#8217;ai pas de solutions miracles, sans changement fondamental de notre mode de vie, mais j&#8217;ai des questions, des craintes et aussi un message à faire passer : <strong>il est encore temps</strong>.
La première de nos libertés, c&#8217;est encore de voter, faisons le tant que nous en avons encore la possibilité.</p>
</div>
</div>
</div></p>
  			<a href="/blog/2024/01-04-jsolex-2.0.html"><h1>Stacking and mosaic creation with JSol&#8217;Ex 2.0</h1></a>
  			<p>04 January 2024</p>
			<p><em>Tags: </em>
		<a href="/blog/tags/astronomy.html">astronomy</a> 
	
		<a href="/blog/tags/astro4j.html">astro4j</a> 
	
		<a href="/blog/tags/solex.html">solex</a> 
	
		<a href="/blog/tags/java.html">java</a> 
	</p>
			
  			<p><div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>A couple days ago I have released <a href="https://github.com/melix/astro4j/releases/tag/2.0.0">JSol&#8217;Ex 2.0</a>.
This software can be used as an alternative to <a href="http://valerie.desnoux.free.fr/inti/">INTI</a> to process solar images acquired using Christian Buil&#8217;s <a href="http://www.astrosurf.com/solex/sol-ex-presentation-en.html">Sol&#8217;Ex</a>.
This new version introduces 2 new features that I would like to describe in more details in this blog post: stacking and mosaic stitching.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_stacking">Stacking</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Stacking should be something familiar to anyone doing planetary imaging.
One of the most popular sofware for doing stacking is <a href="https://www.autostakkert.com/wp/">AutoStakkert!</a> which has recently seen a new major version.
Stacking usually consists of taking a large number of images, selecting a few reference points and trying to align these images to reconstruct a single, stacked image which increases the signal-to-noise ratio.
Each of the individual images are usually small and there are a large number of images (since the goal is to reduce the impact of turbulence, typically, videos are taken with a high frame rate, often higher than 100 frames per second).
In addition, there are little to no changes between the details of a series (granted that you limit the capture to a few seconds, to avoid the rotation of the planet typically) so the images are really "only" disformed by turbulence.
In the context of Sol&#8217;Ex image processing, the situation is a bit different: we have a few captures of large images: in practice, capturing an image takes time (it&#8217;s a scan of the sun which will consist of a video of several seconds just to build a <em>single</em> image) and the solar details can move quickly between captures.
In practice, it means that you can reasonably stack 2 to 5 images, maybe more if the scans are quick enough and that there are not too many changes between scans.</p>
</div>
<div class="paragraph">
<p>The question for me was how to implement such an algorithm for JSol&#8217;Ex?
Compared to planetary image stacking, we have a few advantages:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>images have a great resolution: depending on the camera that you use and the binning mode, you can have images which range from several hundreds pixels large to a few thousands pixels</p>
</li>
<li>
<p>the images are well defined : in planetary observation, there are a few "high quality" images in a video of several thousand frames, but most images are either fully or partially disformed</p>
</li>
<li>
<p>there&#8217;s little movement between images: anyone who has stacked a planetary video can see that it&#8217;s frequent to see jumps of several pixels between 2 images, just because of turbulence</p>
</li>
<li>
<p>for each image, we already have determined the ellipse which makes the solar disk and should also have corrected the geometry, so that all solar disks are "perfect circles"</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Therefore, a naive approach, which I tried without success a few months ago, is a geometric approach where we simply make all solar disks the same (by resizing), align them then create an average image.
To illustrate this approach, let&#8217;s look at some images:</p>
</div>
 <video width="1024" height="768" controls>
  <source src="https://melix.github.io/blog/img/jsolex2/reference.webm" type="video/webm">
Your browser does not support the video tag.
</video>
<div class="paragraph">
<p>In this video we can see that there is quite some movement visible between each image.
Each of them is already of quite good quality, but we can notice some noise and more importantly, a shear effect due to the fact that a scan takes several seconds and that we reconstruct line by line :</p>
</div>
<div class="imageblock">
<div class="content">
<img src="/blog/img/jsolex2/stack-ref.jpg" alt="stack ref">
</div>
</div>
<div class="paragraph">
<p>The average image is therefore quite blurry:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="/blog/img/jsolex2/stack-average.jpg" alt="stack average">
</div>
</div>
<div class="paragraph">
<p>Therefore, using the average image is <em>not</em> a good option for stacking and that&#8217;s why I recommended to use <a href="https://www.autostakkert.com/wp/">AutoStakkert!</a> instead, which gave better results.</p>
</div>
<div class="paragraph">
<p>In order to achieve better results, I opted for a simple yet effective algorithm:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>first, estimate the sharpness of each image. This is done by computing the <a href="https://en.wikipedia.org/wiki/Laplace_operator">Laplacian</a> of each image. The image with the best sharpness is selected as the <em>reference</em> image</p>
</li>
<li>
<p>divide each image into tiles (by default, a tile has a width of 32 pixels)</p>
</li>
<li>
<p>for each tile, try to align it with the reference image by computing an error between the reference tile and the image</p>
</li>
<li>
<p>the error is based on root mean squared error of the pixel intensities : the better the tiles are aligned, the closer to 0 the error will be</p>
</li>
<li>
<p>this is the most expensive operation, because it requires computing the error for various positions</p>
</li>
<li>
<p>we&#8217;re only looking for displacements with a maximum shift of 2/3 of the tile size (so, by default, 21 pixels maximum)</p>
</li>
<li>
<p>if the shift between 2 tiles is higher than this limit, we won&#8217;t be able to align the tiles properly</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>We could have stopped here and already reconstruct an image at this stage, but the result wouldn&#8217;t be great: the fact that we use tiles would be visible at the edges of the tiles, with square artifacts clearly visible.
To reduce the artifacts, I opted for a "sliding window" algorith, where the next tile will overlap the previous one by a factor between 0 (no overlap) and 1 (100% overlap).
This means that for each pixel, we will get a "stack" of pixel values computed from the alignment of several tiles.
The final pixel value is then computed by taking the median value of the stack.
Even so, some stacking vertical or horizontal artifacts can still be sometimes visible, so the last "trick" I used is to build the stacks by only taking pixels within a certain radius, instead of the whole square.</p>
</div>
<div class="paragraph">
<p>The resulting, stacked image is here:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="/blog/img/jsolex2/stack-jsolex.jpg" alt="stack jsolex">
</div>
</div>
<div class="paragraph">
<p>We can see that:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>noise from the original images is gone</p>
</li>
<li>
<p>shearing artifacts are significantly reduced</p>
</li>
<li>
<p>the resulting image is not as blurry as the average version</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>There were, however, some compromises I had to make, in order to avoid that the stacking process takes too long.
In particular, the tile alignment process (in particular error computation) is very expensive, since for each tile, we have to compute 21*21 = 441 errors by default.
With an overlap factor of 0.3, that&#8217;s, for an image of 1024 pixels large, more than 5 million errors to compute.
Even computing them in parallel takes long, therefore I added <a href="https://en.wikipedia.org/wiki/Local_search_(optimization)">local search optimization</a>: basically, instead of searching in the whole space, I&#8217;m only looking for errors within a restricted radius (8 pixels).
Then, we take the minimal error of this area and resume searching from that position: step by step we&#8217;re moving "closer" to a local optimum which will hopefully be the best possible error.
While this doesn&#8217;t guarantee to find the best possible solution, it proved to provide very good results while significantly cutting down the computation times.</p>
</div>
<div class="paragraph">
<p>From several tests I made, the quality of the stacked image matches that of Autostakkert!.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_mosaic_composition">Mosaic composition</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The next feature I added in JSol&#8217;Ex 2, which is also the one which took me most time to implement, is mosaic composition.
To some extent, this feature is similar to stacking, except that in stacking, we know that all images represent the same region of the solar disk and that they are roughly aligned.
With mosaics, we have to work with different regions of the solar disk which overlap, and need to be stitched together in order to compose a larger image.</p>
</div>
<div class="paragraph">
<p>On December 7th, 2024, I had given a glimpse of that feature for <a href="https://www.astro-images-processing.fr/articles/135166-pratique-et-traitement-d-images-sol-ex">the french astrophotograhers association AIP</a>, but I wasn&#8217;t happy enough with the result so decided to delay the release.
Even today, I&#8217;m not fully satisfied, but it gives reasonable results on several images I tried so decided it was good enough for public release and getting feedback about this feature.</p>
</div>
<div class="paragraph">
<p>Mosaic composition is not an easy task: there are several problems we have to solve:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>first, we need to identify, in each image, the regions which "overlap"</p>
</li>
<li>
<p>then for each image, we need to be able to tell if the pixel value we read at a particular place is relevant for the whole composition or not</p>
</li>
<li>
<p>then we have to do the alignment</p>
</li>
<li>
<p>and finally avoid mosaicing artifacts, typically vertical or horizontal lines at the "edges"</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>In addition, mosaic composition is not immune to the problem that each image can have different illumination, or even that the regions which are overlapping have slightly (or even sometimes significantly) moved between the captures.
Therefore, the idea is to "warp" images together in order to make them stitch smoothly.</p>
</div>
<div class="sect2">
<h3 id="_preparing_panels_for_integration">Preparing panels for integration</h3>
<div class="paragraph">
<p>Here are the main steps of the algorithm I have implemented:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>resize images so that they all solar disks have the same radius (in pixels), and that all images are square</p>
</li>
<li>
<p>normalize the histograms of each panel so that all images have similar lightness</p>
</li>
<li>
<p>estimate the background level of each panel, in order to have a good estimate of when a pixel of an image is relevant or not and perform background neutralization</p>
</li>
<li>
<p>there can be more than 2 panels to integrate. My algorithm works by stitching them 2 by 2, which implies sorting the panels by putting the panels which overlap the most in front, then stitching the 2 most overlapping panels together. The result of the operation is then stitched together with the next panel, until we have integrated all of them.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>The stitching part works quite differently than with typical stacking.
In stacking, we have <em>complete</em> data for each image: we "only" have to align them.
With mosaics, there are "missing" parts in the image that we need to fill in.
To do this, we have to identify which part of a panel can be blended into the reconstructed image in order to complete it.
This means that the alignment process is significanly more complicated than with typical stacking, since we will work on "missing" data.
Part of the difficulty is precisely identifying if something is missing or not, that is to say if the signal of a pixel in one of the panels is relevant to the composition of the final image.
This is done by comparing it with the estimated background level, but that&#8217;s not the only trick.</p>
</div>
<div class="paragraph">
<p>Despite the fact that our panels are supposedly aligned and that the circles representing the solar disks are supposed to be the same, in practice, depending on the quality of the capture and the ellipse regression success, the disks may be <em>slightly off</em>, with deformations.
There can even be slight rotations between panels (because of flexions at capture time, or processing artifacts).
As a consequence, a naive approach consisting of trying to minimize the error between 2 panels by moving them a few pixels in each direction like in stacking <em>doesn&#8217;t work</em>:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>first of all, while you may properly align one edge of the solar disk, we can see that some regions will be misaligned. If these regions correspond to high contrast areas like filaments, it gives real bad results. If it happens at the edges of the sun, you can even see part of the disk being shifted a few pixels away from the other panel, which is clearly wrong.</p>
</li>
<li>
<p>second, estimating the error is not so simple, since we have <em>incomplete</em> disks. And in this case, the error has to be computed on large areas, which means that the operation is very expensive.</p>
</li>
<li>
<p>third, because we have to decide whether to pick a pixel from one panel or the other, this has the tendency to create very strong artifacts (vertical or horizontal lines) at the stitching edges</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_the_stitching_algorithm">The stitching algorithm</h3>
<div class="paragraph">
<p>Giving all the issues I described above, I chose to implement an algorithm which would work similarly to stacking, by "warping" a panel into another.
This process is iterative, and the idea is to take a "reference" panel, which is the one which has the most "relevant" pixels, and align tiles from the 2d panel into this reference panel.</p>
</div>
<div class="paragraph">
<p>To do this, we compute a grid of "reference points" which are in the "overlapping" area.
These points belong to the reference image, and one difficulty is to filter out points which belong to "incomplete" tiles.
Once we have these points, for each of them, we compute an alignment between the reference tile and the tile of the panel we&#8217;re trying to integrate.
This gives us, roughly, a "model" of how tiles are displaced in the overlapping area.
The larger the overlapping area is, the better the model will be, but experience shows that distorsion on one edge of the solar disk can be significanly different at the other edge.</p>
</div>
<div class="paragraph">
<p>The next step consists of trying to align tiles of the panel we integrate to the reference panel using this model.
This is where the iteration process happens.
In a nutshell, we have an area where the solar disk is "truncated".
Even if we split the image in tiles like with stacking, we cannot really tell whether a tile is "complete" or not, because it depends both on the pixel intensities of the reference panel and the second panel, and the background level.
In particular, calcium images may have dark areas <em>within</em> the solar disk which are sometimes as dark as the background.</p>
</div>
<div class="paragraph">
<p>If you are struggling to understand how difficult it can be to determine if part of the image we consider is relevant or not, let&#8217;s illustrate with this image:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="/blog/img/jsolex2/panel_noise.jpg" alt="panel noise">
</div>
</div>
<div class="paragraph">
<p>Can you see what&#8217;s wrong in this image?
Let&#8217;s increase constrast to make it clearly visible:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="/blog/img/jsolex2/panel_noise2.jpg" alt="panel noise2">
</div>
</div>
<div class="paragraph">
<p>Now it should be pretty obvious that below the south edge of the truncated disk, we have an area which has pixels which are above the value of the background, but do not constitute actual signal!
This problem took me quite some time to solve, and it&#8217;s only recently that I figured out a solution: before mosaicing, I am performing a background neutralization step, by modeling the background and substracting it from the image.
While this doesn&#8217;t fully solve the problem, it makes it much less relevant for composition.</p>
</div>
<div class="paragraph">
<p>In addition, we have to compose the image using tiles which are incomplete, and we don&#8217;t know the orientation of the panels: they can be assembled north/south, or west/east, and nothing tells us.
Potentially, it can even be a combination of these for a large number of panels.</p>
</div>
<div class="paragraph">
<p>Therefore, the algorithm works by creating a "mask" of the image being reconstructed.
This mask tells us "for this particular pixel, I have reconstructed a value, or the value of the reference image is good enough and we won&#8217;t touch it".
Then, for each tile, we consider tiles for which the mask is incomplete.</p>
</div>
<div class="paragraph">
<p>In order to determine how to align the truncated disk with data from the other image, we compute an estimate of the distortion of the tile based on the displacements models we have determined earlier.
Basically, for a new "tile" to be integrated, we will consider the sample "reference points" which are within a reasonable distance of the tile.
For this set of reference points, we know that they are "close enough" to compute an average model of the distorsion, that I call the "local distorsion": we can estimate, based on the distance of each reference point, how much they contribute to the final distorsion model for that particular point.</p>
</div>
<div class="paragraph">
<p>The key is really to consider <em>enough</em> samples to have a good distorsion model, but not too many because then the "locality" of alignment would become too problematic and we&#8217;d face misalignments.
Because there are not so many samples for each "incomplete" tile, we are in fact going to reconstruct, naturally, the image from the edges where there&#8217;s missing data: when there are no samples, it basically means we cannot compute a model, so we don&#8217;t know how to align tiles.
If we have enough samples, then we can compute a reliable model of the distorsion, and then we can reconstruct the missing part of each tile, by properly aligning the tiles together.
If the number of samples is not sufficient to consider a good model, then we assume that no distorsion happens, which is often the case for "background" tiles.</p>
</div>
<div class="paragraph">
<p>Most of the difficulty in this algorithm is properly identifying "when" we can stitch tiles together, that is to say when we can tell that the alignment between tiles makes sense and that the alignment is correct.
Often, I got good results for one kind of images (e.g, h-alpha images) but horrible results with others (e.g calcium) or the other way around.
I cannot really say I took a very scientific approach to this problem, but more an empirical approach, tweaking parameters of my algorithm until it gave good enough results in all cases.</p>
</div>
<div class="paragraph">
<p>I mentioned that the algorithm is iterative, but didn&#8217;t explain why yet: when we compute the tile alignments, we only do so because we have enough local samples for alignment.
We do this for all tiles that match this criteria, but we won&#8217;t, for example, be able to align a tile which is in the top of the image, if the bottom hasn&#8217;t been reconstructed.
Therefore, the iteration happens when we have reconstructed all the tiles we could in one step: then we recompute new reference points, and complete the image, not forgetting, of course, to update our mask to tell that some pixels were completed.</p>
</div>
<div class="paragraph">
<p>Overall the algorithm is fairly fast, and can be stopped once we have completed all tiles, or after a number of fixed iterations in case of difficulties (often due to the background itself).</p>
</div>
</div>
<div class="sect2">
<h3 id="_one_last_step">One last step</h3>
<div class="paragraph">
<p>The algorithm we&#8217;ve described provides us with a way to "roughly" reconstruct an image, but it doesn&#8217;t work like what you&#8217;d intuititvely think of mosaic composition, by "moving" 2 panels until they properly align and blend them toghether.
Instead, it will reconstruct an image by assembling <em>tiles</em> together, from what is <em>already</em> reconstructed: it is more fine grained, which will fix a number of the issues we&#8217;ve faced before: local distorsions, or images which are not properly aligned because the details at the surface at the sun <em>have moved</em> between the moment the first panel was captured and the second one did.</p>
</div>
<div class="paragraph">
<p>If we stopped there, we would see an image which looks like this:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="/blog/img/jsolex2/mosaic_reconstructed.jpg" alt="mosaic reconstructed">
</div>
</div>
<div class="paragraph">
<p>We can see a clear horizontal line, which is due to the fact that we&#8217;re reconstructing using tiles, and that depending on the alignment of tiles with the "missing" areas, we can have strong or weak artifacts at the borders.
Errors are even more visible in this image in calcium K line:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="/blog/img/jsolex2/mosaic_error_calcium.jpg" alt="mosaic error calcium">
</div>
</div>
<div class="paragraph">
<p>This time it&#8217;s very problematic and we are facing several of the issues we attempted to avoid: details have significantly moved between the north and south panel were captured, which leads to "shadowing" artifacts, and there are also tiling artifacts visible.</p>
</div>
<div class="paragraph">
<p>However, the image we get is <em>good enough</em> to perform one last step: use it as a <em>reference image</em> in the stacking algorithm we described in the first section of this blog post.
The reason stacking works well is because we know we have complete images that we can align.
Here, we have roughly reconstructed an image that we can use as a "complete reference".
The idea is therefore to take each tile of each panel and "blend" it using the reconstructed reference.
Of course, there is one big difference between the stacking in the first section and the stacking we have to do now.
We&#8217;re not really going to use the reconstructed image, except for aligning tiles together and computing a "weight" for each tile, which depends on the relative luminosity between the reference image tile we&#8217;re considering and the corresponding panel tile.</p>
</div>
<div class="paragraph">
<p>This gives us a pretty good result:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="/blog/img/jsolex2/mosaic_halpha_final.jpg" alt="mosaic halpha final">
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="/blog/img/jsolex2/mosaic_calcium_final.jpg" alt="mosaic calcium final">
</div>
</div>
<div class="paragraph">
<p>The images we got there are not perfect, which is why I&#8217;m not fully satisfied yet, but they are however already quite good, given that it&#8217;s all done in a few seconds, using the same software that you&#8217;d use to reconstruct Sol&#8217;Ex images!
In other words, the goal of these features is <em>not</em> to get the same level of quality that you&#8217;d get by using your favorite post-processing or mosaic composition software, but good enough to get you a reasonable result in a reasonable amount of time.</p>
</div>
<div class="paragraph">
<p>For example, on my machine, it takes less than one minute to:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>stack images of the north and south panels (~10 images to stack)</p>
</li>
<li>
<p>stitch them together in a mosaic</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>It would have taken several minutes, or even more, using external software, especially for the mosaic part.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_conclusion">Conclusion</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In this blog post, I have described how I got to implement 2 algorithms, the stacking algorithm and the mosaic composition one, in JSol&#8217;Ex.
None of the algorithms were based on any research paper: they were really designed in an "adhoc" way, as my intuition of how things could work.
It proved to be quite difficult, and it is very likely that better algorithms are described in the wild: I will consider them for future versions.</p>
</div>
<div class="paragraph">
<p>Nevertheless, I&#8217;m quite happy with the outcome, since, remember, I have started this program as an experiment and for learning purposes only.
Now I sincerely hope that it will help you get amazing solar images!</p>
</div>
</div>
</div></p>
	
	<hr />
	
	<p>Older posts are available in the <a href="/blog/archive.html">archive</a>.</p>

		</div>
		<div id="push"></div>
    </div>
    
    <div id="footer">
      <div class="container">
	<p class="muted credit">All posts on this blog are published with a <em>Creative Commons by-nc-sa</em> license.<a rel="license" href="https://creativecommons.org/licenses/by-nc-sa/2.0/fr/"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-nc-sa/2.0/fr/88x31.png"/></a></p>
        <p class="muted credit">Baked with <a href="https://jbake.org">JBake v2.6.6</a></p>
      </div>
    </div>
    
    <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    
    <script src="/blog/js/jquery-1.11.1.min.js"></script>
    <script src="/blog/js/bootstrap.min.js"></script>
   <script>hljs.highlightAll();</script>
  </body>
</html>
