<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Cédric Champeau's blog</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">
    <meta name="keywords" content="">    

    <!-- Le styles -->
    <link href="/blog/css/bootstrap.min.css" rel="stylesheet">
    <link href="/blog/css/asciidoctor.css" rel="stylesheet">
    <link href="/blog/css/base.css" rel="stylesheet">
   <script src="https://kit.fontawesome.com/fefa3ec5bf.js" crossorigin="anonymous"></script>
      
    <script src="/blog/js/highlight.min.js"></script>
    <link href="/blog/css/equilibrium-gray-light.min.css" rel="stylesheet">
    <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="js/html5shiv.min.js"></script>
    <![endif]-->

    <!-- Fav and touch icons -->
    <!--<link rel="apple-touch-icon-precomposed" sizes="144x144" href="../assets/ico/apple-touch-icon-144-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="114x114" href="../assets/ico/apple-touch-icon-114-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="72x72" href="../assets/ico/apple-touch-icon-72-precomposed.png">
    <link rel="apple-touch-icon-precomposed" href="../assets/ico/apple-touch-icon-57-precomposed.png">-->
    <link rel="shortcut icon" href="favicon.ico">
  </head>
  <body>
    <div id="wrap">
   
	
	<!-- Fixed navbar -->
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
          <div class="container">
	    <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/blog">Cédric Champeau's blog</a>
	    </div>
            <div class="navbar-collapse collapse">
              <ul class="nav navbar-nav">                
                <li><a href="/blog/about.html">About</a></li>
		<li><a href="/blog/projects.html">Projects</a></li>
		<li><a href="/blog/astronomy.html">Astronomy</a></li>
		<li class="dropdown">
          		<a data-toggle="dropdown" href="#">Topics<b class="caret"></b></a>
		          <ul class="dropdown-menu" role="menu">
				<li><a href="/blog/tags/gradle.html">Gradle</a></li>
                <li><a href="/blog/tags/groovy.html">Groovy</a></li>
                <li><a href="/blog/tags/micronaut.html">Micronaut</a></li>
                <li><a href="/blog/tags/index.html">See all tags</a></li>
		          </ul>
	       </li>
                <li><a href="/blog/feed.xml">Feed</a></li>                
              </ul>
	      <ul class="nav navbar-nav navbar-right">
	      	<li><a href="https://github.com/melix"><i class="fa fa-github"></i></a></li>
	        <li><a href="https://twitter.com/CedricChampeau"><i class="fa fa-twitter"></i></a></li>
	        <li><a rel="me" href="https://mastodon.xyz/@melix"><i class="fa-brands fa-mastodon"></i></a></li>
	      </ul>
            </div>
          </div>
      </div>
      <div class="container">

	<div class="page-header">
		<h1>Blog</h1>
	</div>
  			<a href="/blog/2022/11/hello-mastodon.html"><h1>Hello, Mastodon (goodbye Twitter!)</h1></a>
  			<p>06 November 2022</p>
			<p><em>Tags: </em>
		<a href="/blog/tags/twitter.html">twitter</a> 
	
		<a href="/blog/tags/mastodon.html">mastodon</a> 
	</p>
			
  			<p><div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>It should be no news to anyone that <a href="https://www.bbc.com/news/technology-63402338">Elon Musk finally took control of Twitter</a>.
There were reasons to be worried about this move, but the <a href="https://www.reuters.com/technology/twitter-start-layoffs-friday-morning-internal-email-2022-11-04/">recent events at Twitter made it worse than most of us would have thought</a>.</p>
</div>
<div class="paragraph">
<p>TL/DR: I am moving primarily to Mastodon. You can now follow me at <a href="https://mastodon.xyz/@melix"> @<a href="mailto:melix@mastodon.xyz">melix@mastodon.xyz</a></a>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_twitter_as_a_self_promotion_tool">Twitter as a self-promotion tool</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Lots of people have a complicated story with Twitter, I am no different.
I joined Twitter back in January 2010, and I&#8217;ve grown up to more 4800 followers nowadays, and from time to time, I suffered from being exhausted by the negativity of the network.
Last year, I was even in the middle of an harassment story, because some trolls thought I was someone else.</p>
</div>
<div class="paragraph">
<p>However, Twitter has been my main communication channel for professional work: this is where I explain what I work on, announce software updates, events I will attend or talk to, or publish blog posts links like this one.
This is also my main feedback channel and where I do most of my technology intelligence.</p>
</div>
<div class="paragraph">
<p>My community of followers doesn&#8217;t make me an "influencer" at large scale, like a rock star, but it definitely had an influence on my professional career.
For example, different potential employers explicitly mentioned my "influence" and social media presence, for example, as a major reason why they&#8217;d like to work with me.
I have no doubt that without Twitter, my career wouldn&#8217;t have been the one it is today.
For that, I am forever grateful.</p>
</div>
<div class="paragraph">
<p>I am also using my Twitter account for personal stuff.
Most notably, some of you have seen my astronomy pictures.
You may also have seen some political posts and point of views being expressed.
While I&#8217;m using Twitter professionally, I always made it clear that the opinions I&#8217;m expressing are not representative of my employer&#8217;s point of view.
Said differently, I see my Twitter account as a <em>tool</em>, but a tool which "survives" my different employers.
To some extent, it&#8217;s part of my digital identity.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_then_came_elon_musk">Then came Elon Musk</h2>
<div class="sectionbody">
<div class="paragraph">
<p>I was already very critical of Elon Musk, and not just because of the infamous Starlink project, for which I have so much to say.
One can admire what he created with Tesla or SpaceX (and I do admire), but at the same time, we can recognize that he&#8217;s a terrible human being.
This is all about business, all about money, and “freedom of speech” only when it suits his point of view.
Elon is making people work as hard as they can until they burnout or simply get fired once they have "done their job".
Elon is also a "special" view of free speech, where those who pay will have right for free speech, while those who don&#8217;t won&#8217;t be visible anymore.
He&#8217;s also the one blocking anyone criticizing him.</p>
</div>
<div class="paragraph">
<p>As a consequence, the head of Twitter, and therefore Twitter itself, now represents everything I fight against in my personal life.
This is the world I don&#8217;t want for my children.
This is the world which puts money before human beings, the world where power, masculinity, is emphasized.
Elon doesn&#8217;t care that we exhaust resources, as long as part of the population can survive, be it on Mars (!).</p>
</div>
<div class="paragraph">
<p>But now, he fired half of the company, by email, <a href="https://techcrunch.com/2022/11/04/twitter-faces-a-class-action-lawsuit-over-mass-employee-layoffs-with-proper-legal-notice/">ignoring the law</a>, because, you know, Musk does whatever he wants.
It happens that I know people who got fired and I also know folks who used to work for Twitter before.
I, for one, am respectful of what people produce.
I am respectful of what efforts it takes to build a site like Twitter, and, in general, I am someone who puts <em>trust</em> in other people at the top of my hierarchy of beliefs.
So I find it extremely annoying, or, to be clear, disgusting when someone who has absolutely no understanding of how to build such a large community over the years, decides to layoff half of a company, change the spirit of the website so that paying customers have more power than the others, so that it matches more his political point of view.
Even if the company is losing $4M a day, compared to B44$, seriously, what would have it taken to show the people who built Twitter a bit of respect and simply build a plan, say, of volunteer departures.</p>
</div>
<div class="paragraph">
<p>Elon Musk&#8217;s behavior is everything I hate: someone coming because they have power (understand, money), and then ruining other people lives just because he can, without any respect.</p>
</div>
<div class="paragraph">
<p>This puts me in a difficult situation: at the same time, I <em>need</em> Twitter, because it&#8217;s a professional tool which can&#8217;t be easily replaced and I <em>have to go</em> because there&#8217;s no way I&#8217;m going to pay 8 dollars a month to a company who treats human beings like that, and simply to get more visibility over others just because I can afford it.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_hello_mastodon">Hello, Mastodon!</h2>
<div class="sectionbody">
<div class="paragraph">
<p>As a FOSS supporter, back in 2017, I had registered to <a href="https://joinmastodon.org">Mastodon</a>.
My account was left more or less inactive for years, because, honestly, not many people used it so it was &#8230;&#8203; annoying.
This was like talking in an echo chamber.
Until the rumor of Elon Musk acquiring Twitter started: we&#8217;ve seen more and more people joining, and I&#8217;m super glad that this week alone, <em>many</em> other people, including from the Tech industry, decided to make the move.</p>
</div>
<div class="paragraph">
<p>No more ads. No more recommendations. A clean timeline, as it should be.</p>
</div>
<div class="paragraph">
<p>It&#8217;s really refreshing to be on Mastodon, it feels like the Twitter from the early days.</p>
</div>
<div class="paragraph">
<p>However, Mastodon has a number of key differences, which make it more "complicated" for users to understand.
First of all, and that&#8217;s the biggest issue for joining, Mastodon is <em>not</em> a single site like Twitter: it&#8217;s a <em>federation</em> of servers.
Just like you have a provider for your email (say GMail, Hotmail, etc.), you can choose your Mastodon server provider.
As an OSS project, you can go even as far as hosting your own instance.</p>
</div>
<div class="paragraph">
<p>Therefore, Mastodon is, by nature, distributed, which makes it completely immune to what just happened to Twitter.
But it also means that there are a few things you should be aware when you join a server:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>content moderation is the responsibility of the server administrator: they can block you, read your posts, private messages. They can block other providers too, which means, for example, that if you choose to go to an instance which has a Code of Conduct, you have to follow the rules.</p>
</li>
<li>
<p>the good news is that you <em>own the content</em>: if you are not happy with your server moderation rules, you can <em>move to a different instance</em>, and you can move your data with it: toots, folks you follow, followers, &#8230;&#8203;</p>
</li>
<li>
<p>the cost of maintenance is distributed on the community: there are lots of <em>free</em> servers out there, but you can choose to participate to the bills. You can even build your own server, for a price which wouldn&#8217;t exceed much what Elon wants us to pay to get a blue mark</p>
</li>
<li>
<p>Hashtags are much more important in Mastodon than Twitter: there&#8217;s no <em>global search</em>: the only things which are indexed are hash tags. You won&#8217;t find contents which is not with a hash tag.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>This is the internet I remember of.
It&#8217;s not suitable for everyone, but it&#8217;s what I call <em>open</em>.
What I also like is that it respects freedom of speech, while preserving your freedom of not seeing assholes (there are instances which are full of alt-right folks, but at least, we can block the whole server and not have to suffer their nauseating posts).</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_conclusion">Conclusion</h2>
<div class="sectionbody">
<div class="paragraph">
<p>So, for the time being, I&#8217;m transitioning to Mastodon.
<strong>You can follow me at <a href="https://mastodon.xyz/@melix"> @<a href="mailto:melix@mastodon.xyz">melix@mastodon.xyz</a></a></strong>, and I strongly suggest that you do the same and find a server which suits you.
I will <em>not</em> support a company which now represents the worst of human beings.
I will <em>not</em> pay $8 a month to a company which shows no respect to its employees, content creators and business partners.</p>
</div>
<div class="paragraph">
<p>Because it&#8217;s hard to say goodbye to a professional network just like that, I do not plan to shutdown my account on Twitter yet, though: I still didn&#8217;t find a way to solve this cognitive dissonance.</p>
</div>
<div class="paragraph">
<p>So what I plan on doing is moving to Mastodon first.
I have already updated my screen name in Twitter to give a link to my Mastodon account.
I suggest you do the same.
I will now limit my tweets to what is strictly required for my professional career (announcements, etc.) and use Mastodon for everything else, until I can completely get rid of Twitter.
I am conscious that I may not be able to completely get rid of it, if too many people stay on Twitter.
So be it.</p>
</div>
<div class="paragraph">
<p>Congratulations M. Musk, you ruined Twitter!</p>
</div>
</div>
</div></p>
			<p><a href="/blog/2022/11/hello-mastodon.html#disqus_thread">Comments</a></p>
  			<a href="/blog/2022/10/astro-twitch.html"><h1>Astrophotographie: la suite !</h1></a>
  			<p>05 October 2022</p>
			<p><em>Tags: </em>
		<a href="/blog/tags/astrophotographie.html">astrophotographie</a> 
	
		<a href="/blog/tags/twitch.html">twitch</a> 
	</p>
			
  			<p><div class="paragraph">
<p>Salut à tous !</p>
</div>
<div class="paragraph">
<p>Je vous avais promis de faire un deuxième live sur Twitch pour parler d&#8217;astrophotographie, cette fois-ci sur la partie logicielle.
J&#8217;ai décidé d&#8217;arrêter de procrastiner et je vous annonce le <strong>mercredi 12 octobre à 20h</strong> sur <a href="https://www.twitch.tv/melix_fr">ma chaîne Twitch</a>.</p>
</div>
<div class="paragraph">
<p>Si vous avez raté la première partie sur le matériel astrophoto, c&#8217;est dispo en replay sur <a href="https://www.youtube.com/watch?v=Hudtta97gDU">Youtube</a>.</p>
</div>
<div class="paragraph">
<p>Dans ce live j&#8217;aborderais comment, à partir des données brutes acquises pendant la nuit, on peut obtenir de belles photos grâce à la magie du logiciel.
Nous parlerons de flats, darks, pré-traitement, stacking, &#8230;&#8203; plein de termes compliqués mais qui au final ne sont pas si difficiles à comprendre.</p>
</div>
<div class="paragraph">
<p>Bref, il est temps que je prépare tout ça !</p>
</div></p>
			<p><a href="/blog/2022/10/astro-twitch.html#disqus_thread">Comments</a></p>
  			<a href="/blog/2022/08/micronaut-test-resources.html"><h1>Introducing Micronaut Test Resources</h1></a>
  			<p>04 August 2022</p>
			<p><em>Tags: </em>
		<a href="/blog/tags/micronaut.html">micronaut</a> 
	
		<a href="/blog/tags/testcontainers.html">testcontainers</a> 
	
		<a href="/blog/tags/docker.html">docker</a> 
	
		<a href="/blog/tags/test.html">test</a> 
	
		<a href="/blog/tags/testing.html">testing</a> 
	</p>
			
  			<p><div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>The new <a href="https://micronaut.io/2022/08/04/micronaut-framework-3-6-0-released">release of Micronaut 3.6</a> introduces a new feature which I worked on for the past couple of months, called <a href="https://micronaut-projects.github.io/micronaut-test-resources/latest/guide/">Micronaut Test Resources</a>.
This feature, which is inspired from <a href="https://quarkus.io/guides/dev-services">Quarkus' Dev Services</a>, will greatly simplify testing of Micronaut applications, both on the JVM and using GraalVM native images.
Let&#8217;s see how.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_test_resources_in_a_nutshell">Test resources in a nutshell</h2>
<div class="sectionbody">
<div class="paragraph">
<p><a href="https://micronaut-projects.github.io/micronaut-test-resources/latest/guide/">Micronaut Test Resources</a> simplifies testing of applications which depend on external resources, by handling the provisioning and lifecycle of such resources automatically.
For example, if your application requires a MySQL server, in order to test the application, you need a MySQL database to be installed and configured, which includes a database name, a username and a password.
In general, those are only relevant for production, where they are fixed.
During development, all you care about is having <em>one</em> database available.</p>
</div>
<div class="paragraph">
<p>Here are a couple of traditional solutions to this problem:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>document that a MySQL server is a pre-requisite, and give instructions about the database to create, credentials, etc. This can be simplified by using Docker containers, but there&#8217;s still manual setup involved.</p>
</li>
<li>
<p>Use a library like <a href="https://www.testcontainers.org/">Testcontainers</a> in order to simplify the setup</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>In general, using <a href="https://www.testcontainers.org/">Testcontainers</a> is preferred, because it integrates well with the JVM and provides an API which can be used in tests to spawn containers and interact with them.
However, a better integration between Micronaut and <a href="https://www.testcontainers.org/">Testcontainers</a> can improve the developer experience in several ways:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>simplify the container lifecycle configuration by providing an opinionated framework-specific default way, making you think less of how to setup it in the individual tests : tests shouldn&#8217;t need to deal with the container lifecycle: we&#8217;d like to have test containers/resources management as <em>transparent</em> as possible.</p>
</li>
<li>
<p>isolate it better from your application making it simpler to reason about dependencies (and transitive dependencies), not just for the developer, but for example tools enabling native mode as well: Testcontainers APIs "leak" to the test classpath, making it difficult to <a href="https://graalvm.github.io/native-build-tools/latest/gradle-plugin.html#testing-support">run tests in native mode</a>. This is not a problem specific to the Testcontainers library though: many libraries are not yet compatible with GraalVM. Our solution makes it possible to use Testcontainers in native tests without the hassle of configuring it!</p>
</li>
<li>
<p>enable support for "development mode", that is to say when you run the application locally (not the tests, the application itself) or even several distinct projects at once that can benefit from sharing access to the same running containers (for example, an MQTT client and a server may want to use the same container, even if they are individual projects living in distinct Git repositories).</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The goal of <a href="https://micronaut-projects.github.io/micronaut-test-resources/latest/guide/">Micronaut Test Resources</a> is to achieve all of these at once:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>zero-configuration</strong>: without adding any configuration, test resources should be spawned and the application configured to use them. Configuration is only required for advanced use cases.</p>
</li>
<li>
<p><strong>classpath isolation</strong>: use of test resources shouldn&#8217;t leak into your application classpath, nor your test classpath</p>
</li>
<li>
<p><strong>compatible with GraalVM native</strong>: if you build a native binary, or run tests in native mode, test resources should be available</p>
</li>
<li>
<p><strong>easy to use</strong>: the Micronaut build plugins for Gradle and Maven should handle the complexity of figuring out the dependencies for you</p>
</li>
<li>
<p><strong>extensible</strong>: you can implement your own test resources, in case the built-in ones do not cover your use case</p>
</li>
<li>
<p><strong>technology agnostic</strong>: while lots of test resources use <a href="https://www.testcontainers.org/">Testcontainers</a> under the hood, you can use any other technology to create resources</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>In addition, <a href="https://micronaut-projects.github.io/micronaut-test-resources/latest/guide/">Micronaut Test Resources</a> support advanced development patterns, which are useful in the microservices era.
As an example, it is capable of sharing containers between submodules of a single build, or even between independent projects, from different Git repositories!
Say that you have 2 projects, one built with Gradle, the other with Maven, both needing to communicate using the same message bus: Micronaut is capable of handling this use case for you, making it extremely easy to test components interacting with each other!</p>
</div>
<div class="paragraph">
<p>Because of these constraints, we decided to use <a href="https://www.testcontainers.org/">Testcontainers</a>, because the library is just perfect for the job, but in an <em>isolated</em> process instead, as I&#8217;m going to describe below.
Note that this solution is also 100% compatible with <a href="https://www.testcontainers.cloud/">Testcontainers Cloud</a>, which makes container provisioning even easier!</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_using_micronaut_test_resources">Using Micronaut Test Resources</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_enabling_test_resources_support">Enabling test resources support</h3>
<div class="paragraph">
<p><a href="https://micronaut-projects.github.io/micronaut-test-resources/latest/guide/">Micronaut Test Resources</a> integrates with build tools.
In both Maven and Gradle, you need to enable test resources support.
If you create a new project using <a href="https://micronaut.io/launch">Micronaut Launch</a> or the Micronaut CLI, test resources will be configured for you, but if you migrate an existing application to test resources, here&#8217;s what you need to do:</p>
</div>
<div class="paragraph">
<p>If you are using Maven, you will need to upgrade to the Micronaut 3.6 parent POM and add the following property:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="xml">&lt;properties&gt;
   &lt;micronaut.test.resources.enabled&gt;true&lt;/micronaut.test.resources.enabled&gt;
&lt;/properties&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>For Gradle, you can use test resources with Micronaut 3.5+ and you simply need to use the test resources plugin:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="groovy">plugins {
    id 'io.micronaut.application' version '3.5.1'
    id 'io.micronaut.test-resources' version '3.5.1'
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_our_first_test_resources_contact">Our first test resources contact</h3>
<div class="paragraph">
<p>In this blog post we will write an application which makes use of Micronaut Data and connects to a MySQL server to list books.
The whole application code is <a href="https://github.com/melix/micronaut-test-resources-demo/">available on GitHub</a>, so I&#8217;m only going to show the relevant parts for clarity.</p>
</div>
<div class="paragraph">
<p>In such an application, we typically need a repository:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java">@JdbcRepository(dialect = Dialect.MYSQL)
public interface BookRepository extends CrudRepository&lt;Book, Long&gt; {
    @Override
    List&lt;Book&gt; findAll();
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>And this repository makes use of the <code>Book</code> class:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java">@MappedEntity
public class Book {
    @Id
    @GeneratedValue(GeneratedValue.Type.AUTO)
    private Long id;

    private String title;

    public Long getId() {
        return id;
    }

    public void setId(Long id) {
        this.id = id;
    }

    public String getTitle() {
        return title;
    }

    public void setTitle(String title) {
        this.title = title;
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>In order for Micronaut to use the database, we need to add some configuration to our <code>application.yml</code> file:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="yaml">datasources:
  default:
    schema-generate: CREATE
    db-type: mysql</code></pre>
</div>
</div>
<div class="paragraph">
<p>The most important thing to see is that <strong>we don&#8217;t</strong> specify any username, password or URL to connect to our database: the only thing we have to specify is the database type of our datasource.
We can then write the following test:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java">@MicronautTest
class DemoTest {

    @Inject
    BookRepository bookRepository;

    @Test
    @DisplayName("A MySQL test container is required to run this test")
    void testItWorks() {
        Book book = new Book();
        book.setTitle("Yet Another Book " + UUID.randomUUID());
        Book saved = bookRepository.save(book);
        assertNotNull(saved.getId());
        List&lt;Book&gt; books = bookRepository.findAll();
        assertEquals(1, books.size());
    }

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The test creates a new book, stores it in the database, then checks that we get the expected number of books when reading the repository.
Note, again, that we didn&#8217;t have to specify any container whatsoever.
In this blog post I&#8217;m using Gradle, so we can verify the behavior by running:</p>
</div>
<div class="paragraph">
<p><code>./gradlew test</code></p>
</div>
<div class="paragraph">
<p>Then you will see the following output (cleaned up for clarity of this blog post):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code>i.m.testresources.server.Application - A Micronaut Test Resources server is listening on port 46739, started in 128ms
i.m.t.e.TestResourcesResolverLoader - Loaded 2 test resources resolvers: io.micronaut.testresources.mysql.MySQLTestResourceProvider, io.micronaut.testresources.testcontainers.GenericTestContainerProvidereted
o.testcontainers.DockerClientFactory - Connected to docker:
  Server Version: 20.10.17
  API Version: 1.41
  Operating System: Linux Mint 20.3
  Total Memory: 31308 MB
🐳 [testcontainers/ryuk:0.3.3] - Creating container for image: testcontainers/ryuk:0.3.3
🐳 [testcontainers/ryuk:0.3.3] - Container testcontainers/ryuk:0.3.3 is starting: 1f5286fa728aca74a7d6d4c0eb2148a3bc81f5c028027496d7aabda7b7ed45e8
🐳 [testcontainers/ryuk:0.3.3] - Container testcontainers/ryuk:0.3.3 started in PT0.655476S
o.t.utility.RyukResourceReaper - Ryuk started - will monitor and terminate Testcontainers containers on JVM exit
🐳 [mysql:latest] - Creating container for image: mysql:latest
🐳 [mysql:latest] - Container mysql:latest is starting: d796c7a1ce10f393a4181f12967ee77ac9864f45595f97967c700f022e86ac7d
🐳 [mysql:latest] - Waiting for database connection to become available at jdbc:mysql://localhost:49209/test using query 'SELECT 1'
🐳 [mysql:latest] - Container is started (JDBC URL: jdbc:mysql://localhost:49209/test)
🐳 [mysql:latest] - Container mysql:latest started in PT7.573915S

BUILD SUCCESSFUL in 11s
7 actionable tasks: 2 executed, 5 up-to-date</code></pre>
</div>
</div>
<div class="paragraph">
<p>What does this tell us? First, that a "Micronaut Test Resources server" was spawned, for the lifetime of the build.
When the test was executed, this service was used to start a MySQL test container, which was then used during tests.
We didn&#8217;t have to configure anything, test resources did it for us!</p>
</div>
</div>
<div class="sect2">
<h3 id="_running_the_application">Running the application</h3>
<div class="paragraph">
<p>What is also interesting is that this also works if you run the application in development mode.
Using Gradle, you do this by invoking <code>./gradlew run</code> (<code>mvn mn:run</code> with Maven): as soon as a bean requires access to the database, a container will be spawned, and automatically shut down when you stop the application.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
Of course, in production, there won&#8217;t be any server automatically spawned for you: Micronaut will rely on whatever you have configured, for example in an <code>application-prod.yml</code> file. In particular, the URL and credentials to use.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>What is even nicer is that you can use this in combination with Gradle&#8217;s continuous mode!</p>
</div>
<div class="paragraph">
<p>To illustrate this, let&#8217;s create a controller for our books:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java">@Controller("/")
public class BookController {
    private final BookRepository bookRepository;

    public BookController(BookRepository bookRepository) {
        this.bookRepository = bookRepository;
    }

    @Get("/books")
    public List&lt;Book&gt; list() {
        return bookRepository.findAll();
    }

    @Get("/books/{id}")
    public Book get(Long id) {
        return bookRepository.findById(id).orElse(null);
    }

    @Delete("/books/{id}")
    public void delete(Long id) {
        bookRepository.deleteById(id);
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Now start the application in <em>continuous mode</em>: <code>./gradlew -t run</code></p>
</div>
<div class="paragraph">
<p>You will see that the application starts a container as expected:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code>INFO  io.micronaut.runtime.Micronaut - Startup completed in 9166ms. Server Running: http://localhost:8080</code></pre>
</div>
</div>
<div class="paragraph">
<p>Notice how it took about 10 seconds to start the application, most it it spent in starting the MySQL test container itself.
You definitely don&#8217;t want to pay this price for every change you make, so this is where the continuous mode is helpful.
If we ask for the list of books, we&#8217;ll get an empty list:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="bash">$ http :8080/books
HTTP/1.1 200 OK
Content-Type: application/json
connection: keep-alive
content-length: 2
date: Tue, 26 Jul 2022 16:59:51 GMT

[]</code></pre>
</div>
</div>
<div class="paragraph">
<p>This is expected, but notice how we didn&#8217;t have a method to actually add a book to our store.
Let&#8217;s fix this by editing the <code>BookController.java</code> class <em>without stopping the server</em>.
Add the following method:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java">    @Get("/books/add/{title}")
    public Book add(String title) {
        Book book = new Book();
        book.setTitle(title);
        return bookRepository.save(book);
    }</code></pre>
</div>
</div>
<div class="paragraph">
<p>Save the file and notice how Gradle instantly reloads the application, but doesn&#8217;t restart the database: it&#8217;s already there so it&#8217;s going to reuse it!</p>
</div>
<div class="paragraph">
<p>In the logs you will see something like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code>INFO  io.micronaut.runtime.Micronaut - Startup completed in 1086ms. Server Running: http://localhost:8080</code></pre>
</div>
</div>
<div class="paragraph">
<p>This time the application started in just a second! Let&#8217;s add a book:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="bash">$ http :8080/books/add/Micronaut%20in%20action
HTTP/1.1 200 OK
Content-Type: application/json
connection: keep-alive
content-length: 38
date: Tue, 26 Jul 2022 17:03:57 GMT

{
    "id": 1,
    "title": "Micronaut in action"
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>However, if we stop the application (by hitting CTRL+C) and start again, you will see that the database will be destroyed when the application shuts down.
Let&#8217;s see how we can "survive" different build invocations.</p>
</div>
</div>
<div class="sect2">
<h3 id="_keeping_the_service_alive">Keeping the service alive</h3>
<div class="paragraph">
<p>By default, the test resources service is <em>short lived</em>: it&#8217;s going to be started at the beginning of a build, and shutdown at the end of a build.
This means, that it will live as long as you have tests running, or, if running in development mode, as long as the application is alive.
However, you can make it survive the build, and reuse the containers in several, independent build invocations.</p>
</div>
<div class="paragraph">
<p>To do this, you need to <em>explicitly start the test resources service</em>:</p>
</div>
<div class="paragraph">
<p><code>./gradlew startTestResourcesService</code></p>
</div>
<div class="paragraph">
<p>This starts the test resources service in the background: it did <em>not</em> start our application, nor did it run tests.
This means that now, we can start our application:</p>
</div>
<div class="paragraph">
<p><code>./gradlew run</code></p>
</div>
<div class="paragraph">
<p>And, because it&#8217;s the first time the application is launched since we started the test resources service, it&#8217;s going to spawn a test container:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code>INFO  io.micronaut.runtime.Micronaut - Startup completed in 9211ms. Server Running: http://localhost:8080</code></pre>
</div>
</div>
<div class="paragraph">
<p>We can add our book:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="bash">$ http :8080/books/add/Micronaut%20in%20action
HTTP/1.1 200 OK
Content-Type: application/json
connection: keep-alive
content-length: 38
date: Tue, 26 Jul 2022 17:03:57 GMT

{
    "id": 1,
    "title": "Micronaut in action"
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The difference is now that if we stop the application (e.g hit CTRL+C) and start it again, it will <em>reuse the container</em>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code>INFO  io.micronaut.runtime.Micronaut - Startup completed in 895ms. Server Running: http://localhost:8080</code></pre>
</div>
</div>
<div class="paragraph">
<p>If we list our books, the database wasn&#8217;t cleaned, so we&#8217;ll get the book we created from the previous time we started the app:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="bash">$ http :8080/books
HTTP/1.1 200 OK
Content-Type: application/json
connection: keep-alive
content-length: 40
date: Tue, 26 Jul 2022 17:14:40 GMT

[
    {
        "id": 1,
        "title": "Micronaut in action"
    }
]</code></pre>
</div>
</div>
<div class="paragraph">
<p>Nice, right?
However there&#8217;s a gotcha if you do this: what happens if we run tests?</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="bash">$ ./gradlew test

&gt; Task :compileTestJava
Note: Creating bean classes for 1 type elements

&gt; Task :test FAILED

DemoTest &gt; A MySQL test container is required to run this test FAILED
    org.opentest4j.AssertionFailedError at DemoTest.java:28</code></pre>
</div>
</div>
<div class="paragraph">
<p>Why is that? This is simply because our tests expect a <em>clean</em> database, and we had a book in it, so keep this in mind if you&#8217;re using this mode.</p>
</div>
<div class="paragraph">
<p>At some point, you will want to close all open resources.
You can do this by explicitly stopping the test resources service:</p>
</div>
<div class="paragraph">
<p><code>./gradlew stopTestResourcesService</code></p>
</div>
<div class="paragraph">
<p>Now, you can run the tests again and see them pass:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="bash">$ ./gradlew test

...
INFO  🐳 [testcontainers/ryuk:0.3.3] - Creating container for image: testcontainers/ryuk:0.3.3
INFO  🐳 [testcontainers/ryuk:0.3.3] - Container testcontainers/ryuk:0.3.3 is starting: ea2aa1c7f1e66a9c7306b00443e8a6693451f3f02bd780b3e2ed7b96ed59936a
INFO  🐳 [testcontainers/ryuk:0.3.3] - Container testcontainers/ryuk:0.3.3 started in PT0.553559699S
INFO  o.t.utility.RyukResourceReaper - Ryuk started - will monitor and terminate Testcontainers containers on JVM exit
INFO  o.testcontainers.DockerClientFactory - Checking the system...
INFO  o.testcontainers.DockerClientFactory - ✔︎ Docker server version should be at least 1.6.0
INFO  🐳 [mysql:latest] - Creating container for image: mysql:latest
INFO  🐳 [mysql:latest] - Container mysql:latest is starting: 1c6437a55b8f9e5668bcec4aef27087c889b8a77ca18d2ddf58809853482a422
INFO  🐳 [mysql:latest] - Waiting for database connection to become available at jdbc:mysql://localhost:49227/test using query 'SELECT 1'
INFO  🐳 [mysql:latest] - Container is started (JDBC URL: jdbc:mysql://localhost:49227/test)
INFO  🐳 [mysql:latest] - Container mysql:latest started in PT7.469460173S

BUILD SUCCESSFUL in 11s
7 actionable tasks: 2 executed, 5 up-to-date</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_native_testing">Native testing</h3>
<div class="paragraph">
<p>Did you know that you can run your test suite in native mode?
That is to say, that the test suite is going to be compiled into a native binary which runs tests?
One issue with this approach is that it&#8217;s extremely complicated to make it work with Testcontainers, as it requires additional configuration.
With <a href="https://micronaut-projects.github.io/micronaut-test-resources/latest/guide/">Micronaut Test Resources</a>, there is no such problem: you can simply invoke <code>./gradlew nativeTest</code> and the tests will properly run.
This works because Testcontainers libraries do not leak into your test classpath: the process which is responsible for managing the lifecycle of test resources is isolated from your tests!</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_under_the_hood">Under the hood</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_how_does_that_work">How does that work?</h3>
<div class="paragraph">
<p>In a nutshell, Micronaut is capable of reacting to the <em>absence</em> of a configured property.
For example, a datasource, in order to be created, would need the value of the <code>datasources.default.url</code> property to be set.
<a href="https://micronaut-projects.github.io/micronaut-test-resources/latest/guide/">Micronaut Test Resources</a> work by <em>injecting</em> those properties at runtime: when the property is read, it triggers the creation of test resources.
For example, we can start a MySQL server, then inject the value of the JDBC url to the <code>datasources.default.url</code> property.
This means that in order for test resources to work, you need to <em>remove</em> configuration (note that for production, you will need to provide an additional configuration file, for example <code>application-prod.yml</code>, which provides the actual values).</p>
</div>
<div class="paragraph">
<p>The entity which is responsible for resolving missing properties is the "Test Resources Server": it&#8217;s a long lived process which is independent from your application and it is responsible for managing the lifecycle of test resources.
Because it&#8217;s independent from the application, it means it can contain dependencies which are not required in your application such as, typically, the Testcontainers runtime.
But it may also contain additional classes, like JDBC drivers, or even your custom test resources resolver!</p>
</div>
<div class="paragraph">
<p>Because this test resources server is a separate process, it also means it can be shared by different applications, which is the reason why we can share the same containers between independent projects.</p>
</div>
<div class="paragraph">
<p>Once you understand that <a href="https://micronaut-projects.github.io/micronaut-test-resources/latest/guide/">Micronaut Test Resources</a> work by resolving <em>missing</em> properties, it becomes straightforward to configure.
In particular, we offer configuration which makes it very easy to support scenarios which are not supported out of the box.
For example, <a href="https://micronaut-projects.github.io/micronaut-test-resources/latest/guide/">Micronaut Test Resources</a> supports several JDBC or reactive databases (MySQL, PostgreSQL, MariaDB, SQL Server and Oracle XE), Kafka, Neo4j, MQTT, RabbitMQ, Redis, Hashicorp Vault and ElasticSearch, but what if you need a different container?</p>
</div>
<div class="paragraph">
<p>In that case, <a href="https://micronaut-projects.github.io/micronaut-test-resources/latest/guide/">Micronaut Test Resources</a> offer a conventional way to create such containers, by simply adding some configuration lines: in the documentation <a href="https://micronaut-projects.github.io/micronaut-test-resources/latest/guide/#modules-testcontainers">we demonstrate how to use the <code>fakesmtp</code> SMTP server with Micronaut Email</a> for example.</p>
</div>
</div>
<div class="sect2">
<h3 id="_custom_test_resources">Custom test resources</h3>
<div class="paragraph">
<p>If the configuration-based support isn&#8217;t sufficient, you also have, in addition, the ability to write your own test resources.
If you use Gradle, which I of course recommend, this is made extremely easy by the test resources plugin, which creates an additional source set for this, named <code>testResources</code>.
For Maven, you would have to create an independent project manually to support this scenario.</p>
</div>
<div class="paragraph">
<p>As an illustration, let&#8217;s imagine that we have a bean which reads a configuration property:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java">@Singleton
public class Greeter {
     private final String name;

     public Greeter(@Value("${my.user.name}") String name) {
         this.name = name;
     }

     public String getGreeting() {
     	return "Hello, " + name + "!";
     }

     public void sayHello() {
         System.out.println(getGreeting());
     }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>This bean requires the <code>my.user.name</code> property to be set.
We could of course set it in an <code>application-test.yml</code> file, but for the sake of the exercise, let&#8217;s imagine that this value is <em>dynamic</em> and needs to be read from an external service.
We will implement a <em>custom test resources resolver</em> for this purpose.</p>
</div>
<div class="paragraph">
<p>Let&#8217;s create the <code>src/testResources/java/demo/MyTestResource.java</code> file with the following contents:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java">package demo;

import io.micronaut.testresources.core.TestResourcesResolver;

import java.util.Collection;
import java.util.Collections;
import java.util.List;
import java.util.Map;
import java.util.Optional;

public class MyTestResource implements TestResourcesResolver {

    public static final String MY_TEST_PROPERTY = "my.user.name";

    @Override
    public List&lt;String&gt; getResolvableProperties(Map&lt;String, Collection&lt;String&gt;&gt; propertyEntries, Map&lt;String, Object&gt; testResourcesConfig) {
        return Collections.singletonList(MY_TEST_PROPERTY); // <b class="conum">(1)</b>
    }

    @Override
    public Optional&lt;String&gt; resolve(String propertyName, Map&lt;String, Object&gt; properties, Map&lt;String, Object&gt; testResourcesConfiguration) {
        if (MY_TEST_PROPERTY.equals(propertyName)) {
            return Optional.of("world");                    // <b class="conum">(2)</b>
        }
        return Optional.empty();
    }

}</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Tells that this resolver can resolve the <code>my.user.name</code> property</p>
</li>
<li>
<p>Returns the value of the <code>my.user.name</code> property</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>And in order for the resolver to be discovered, we need to create the <code>src/testResources/resources/META-INF/services/io.micronaut.testresources.core.TestResourcesResolver</code> file with the following contents:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code>demo.MyTestResource</code></pre>
</div>
</div>
<div class="paragraph">
<p>Now let&#8217;s write a test for this by adding the <code>src/test/java/demo/GreeterTest.java</code> file:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java">package demo;

import io.micronaut.context.annotation.Requires;
import io.micronaut.test.extensions.junit5.annotation.MicronautTest;
import jakarta.inject.Inject;
import org.junit.jupiter.api.Assertions;
import org.junit.jupiter.api.DisplayName;
import org.junit.jupiter.api.Test;

@MicronautTest
class GreeterTest {

    @Inject
    Greeter greeter;


    @Test
    @DisplayName("Says hello")
    void saysHello() {
        greeter.sayHello();
        Assertions.assertEquals("Hello, world!", greeter.getGreeting());
    }

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Now if you run <code>./gradlew test</code>, you will notice that Gradle will compile your custom test resource resolver, and when the test starts, you will read the following line:</p>
</div>
<div class="paragraph">
<p><code>Loaded 3 test resources resolvers: demo.MyTestResource, io.micronaut.testresources.mysql.MySQLTestResourceProvider, io.micronaut.testresources.testcontainers.GenericTestContainerProvider</code></p>
</div>
<div class="paragraph">
<p>So when the <code>Greeter</code> bean is created, it will read the value of the <code>my.user.name</code> property by calling your custom test resolver!
Of course this is a very simple example, and I recommend that you take a look at the <a href="https://github.com/micronaut-projects/micronaut-test-resources">Micronaut Test Resources sources</a> for more examples of implementing resolvers.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_conclusion">Conclusion</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In this blog post, we&#8217;ve explored the new <a href="https://micronaut-projects.github.io/micronaut-test-resources/latest/guide/">Micronaut Test Resources</a> module, which will greatly simplify development of Micronaut applications which depend on external services like databases or messaging queues.
It works by <em>simplifying</em> configuration, by removing lines which used to be present, but now are dynamically resolved, like <code>datasources.default.url</code>.
Test resources are handled in a separate process, the test resources server, which is responsible for handling their lifecycle.
This also makes it possible to share the resources (containers, databases, &#8230;&#8203;) between independent builds.
For advanced use cases, <a href="https://micronaut-projects.github.io/micronaut-test-resources/latest/guide/">Micronaut Test Resources</a> provides <em>configuration based</em> resources creation.</p>
</div>
<div class="paragraph">
<p>Last but not least, <a href="https://micronaut-projects.github.io/micronaut-test-resources/latest/guide/">Micronaut Test Resources</a> is an extensible framework which will let you implement your own test resources in case the built-in ones miss a feature.</p>
</div>
<div class="paragraph">
<p>Special thanks to <a href="https://twitter.com/tim_yates/">Tim Yates</a> for his hard work on upgrading the Micronaut Guides to use test resources, and <a href="https://twitter.com/alvaro_sanchez">Álvaro Sanchez-Mariscal</a> for his support on the Maven plugin!</p>
</div>
</div>
</div></p>
			<p><a href="/blog/2022/08/micronaut-test-resources.html#disqus_thread">Comments</a></p>
  			<a href="/blog/2022/07/je-suis-le-gars-chiant.html"><h1>Je suis le gars chiant</h1></a>
  			<p>28 July 2022</p>
			<p><em>Tags: </em>
		<a href="/blog/tags/science.html">science</a> 
	
		<a href="/blog/tags/naturopathie.html">naturopathie</a> 
	
		<a href="/blog/tags/homéopathie.html">homéopathie</a> 
	
		<a href="/blog/tags/biais-cognitifs.html">biais cognitifs</a> 
	
		<a href="/blog/tags/zététique.html">zététique</a> 
	</p>
			
  			<p><div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>La science. Si j&#8217;avais eu les capacités pour comprendre les abstractions mathématiques nécessaires (j&#8217;essaie encore, de temps en temps), je serais, peut-être, aujourd&#8217;hui assis dans un laboratoire de recherche en astrophysique. J&#8217;ai toujours trouvé fascinant la capacité à émettre des hypothèses, puis les vérifier expérimentalement, pour en faire des théories, théories qui, constamment, peuvent être remises en cause lorsque de nouvelles observations les contredisent. Je suis assis derrière un bureau, mais dans le développement informatique. Ma passion, mon loisir, c&#8217;est l&#8217;astronomie.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_alors_oui_mais_non">Alors oui, mais non</h3>
<div class="paragraph">
<p>J&#8217;ai grandi dans un monde empli de graphologie, de magnétisme, d&#8217;ufologie, de pyramidologie, d&#8217;expériences de mort imminente, qui m&#8217;ont aussi profondément marqué. J&#8217;ai entendu des témoignages, j&#8217;ai constaté des guérisons, j&#8217;ai <em>cru</em> à des beaucoup de choses. Mais pendant une grande partie de mon enfance, je n&#8217;avais pas le bagage intellectuel suffisant pour <em>comprendre</em>. En un mot, ma fascination pour les sciences se mélait allègrement à celle pour les pseudo-sciences. Parce que j&#8217;ai toujours cherché des explications, j&#8217;en suis revenu et je pense que cette expérience a renforcé mon sens critique si tant est que je me sens, de nos jours, extrêmement proche du mouvement <a href="https://fr.wikipedia.org/wiki/Z%C3%A9t%C3%A9tique">zététique</a> et combats fermement l&#8217;anti-science.</p>
</div>
<div class="paragraph">
<p>En soirée, je suis le gars chiant qui ne supporte pas qu&#8217;on introduise du surnaturel là où il existe des explications rationnelles, celui qui soulève un sourcil amusé lorsqu&#8217;on lui parle de <a href="https://fr.wikipedia.org/wiki/S%C5%93urs_Fox">séances de spiritisme</a>.</p>
</div>
<div class="paragraph">
<p>Celui qui vous explique que <a href="https://www.lequotidiendumedecin.fr/archives/pr-edzard-ernst-si-lhomeopathie-est-presentee-comme-une-panacee-il-faudra-quelle-prouve-son">l&#8217;homéopathie ne fonctionne pas</a> et qui vous rappelle que s&#8217;il <a href="https://www.monvoisin.xyz/wp-content/uploads/2020/07/Monvoisin-Pinsault-Diplo-avril19_p21.pdf">existe un effet placébo, il est moralement discutable de le rembourser</a>.</p>
</div>
<div class="paragraph">
<p>Je suis le gars chiant qui, il y a déja des années, avertissait mes amis sur la montée du <a href="https://www.ladn.eu/nouveaux-usages/antivax-histoire-mouvement/">mouvement antivax</a>.
Je suis le gars chiant qui, en tant qu&#8217;astronome amateur, vous démontre que <a href="https://www.afis.org/L-astrologie-a-l-epreuve-ca-ne-marche-pas-ca-n-a-jamais-marche">l&#8217;astrologie n&#8217;a aucun sens</a>.
Je suis le gars chiant qui s&#8217;indigne qu&#8217;on puisse vous vendre des absurdités comme des colliers en ambre pour les douleurs dentaires des bébés ou des <a href="https://menace-theoriste.fr/lithotherapie-1/">pierres à recharger sous la lumière de la lune</a>.</p>
</div>
<div class="paragraph">
<p>Je suis le gars chiant qui vous invite à douter de la médecine chinoise, responsable du <a href="https://dragondubled.fr/medecine-chinoise/rhinoceros-medecine-chinoise/">massacre des rhinocéros</a> et de la <a href="https://fr.wikipedia.org/wiki/Bile_d%27ours">maltraitance d&#8217;ours</a> pour des produits dont il est démontré qu&#8217;il n&#8217;ont aucun effet.
Je suis le gars chiant qui, lorsqu&#8217;on lui parle de produits naturels, vous rappelle que <a href="https://fr.wikipedia.org/wiki/Appel_%C3%A0_la_nature">naturel ne veut pas nécessairement dire bon pour la santé</a>.
Je suis le gars chiant qui vous explique que si les électrosensibles sont réellement malades, <a href="https://www.contrepoints.org/2021/11/22/227498-electrosensibilite-la-maladie-imaginaire-du-xxieme-siecle">ça n&#8217;est pas à cause des ondes mais de mécanismes psychologiques proches des phobies</a>.
Je suis le gars chiant qui s&#8217;insurge contre <a href="https://www.radiofrance.fr/franceinter/podcasts/antidote/antidote-du-vendredi-22-octobre-2021-5726804">la naturopathie et ses tendances complotistes</a> et invite à prendre connaissance <a href="https://www.la-croix.com/Famille/Ecole-meditation-pleine-conscience-accusee-derive-sectaire-2022-02-14-1201200267">des dérives sectaires de la méditation pleine conscience</a>.</p>
</div>
<div class="paragraph">
<p>Je suis le gars chiant qui se dit écolo, mais aussi pro-nucléaire: je suis effondré lorsque les <a href="https://www.latribune.fr/economie/union-europeenne/l-allemagne-pourrait-prolonger-des-centrales-a-charbon-pour-reduire-sa-dependance-au-gaz-russe-906817.html">écolos incitent à relancer des centrales à charbon</a> alors que <a href="https://bonpote.com/nouveau-rapport-du-giec-agir-coutera-moins-cher-que-le-business-as-usual/">les rapports du GIEC nous disent que chaque tonne de CO2 compte</a>.
Je suis le gars chiant qui choque ses amis écolos lorsqu&#8217;il affirme que <a href="https://doseequivalentbanana.home.blog/2021/05/08/dechets-8-on-ne-sait-pas-gerer-les-dechets-nucleaires/">le stockage géologique des déchets nucléaire n&#8217;est pas un problème pour les générations futures</a>.</p>
</div>
<div class="paragraph">
<p>Je me sens écologiste et je suis convaincu que nous devons aller vers la sobriété: je recherche des modes de vie alternatifs, moins impactants pour l&#8217;environnement, moins industriels et à ce titre j&#8217;ai été attiré par les concepts des <a href="https://fr.wikipedia.org/wiki/Mouvement_Colibris">colibris</a> et ses nombreuses variantes.
Mais je vérifie, je confronte mes croyances. Je suis le gars chiant qui découvre que presque tous les mouvements écologistes sont infiltrés par des groupes anti-science, au premier rang desquels on trouve la <a href="https://blogs.mediapart.fr/mathieu-repiquet/blog/090520/qu-est-ce-que-l-anthroposophie-entretien-avec-gregoire-perra">secte anthroposophique</a>. Je suis le gars chiant qui vous fait remarquer que <a href="https://www.reussir.fr/ce-celebre-youtubeur-radicalement-change-sa-vision-de-lagriculture">la permaculture ne permet pas d&#8217;être auto-suffisant</a>, que la plupart de ces mouvements dits alternatifs ne survivent que grâce à des "formations" qui s&#8217;auto-entretiennent et/ou financent des sectes.</p>
</div>
<div class="paragraph">
<p>Je suis l&#8217;écolo qui vous déculpabilise de ne pas <a href="https://www.youtube.com/watch?v=rtG77t9kshE">effacer vos emails car celà ne réduira pas votre emprunte carbone</a>, mais en profite pour vous faire remarquer que ne pas utiliser votre sèche-linge, oui.</p>
</div>
<div class="paragraph">
<p>Je suis le gars chiant qui s&#8217;inquiète lorsque des proches suivent des formations de développement personnel ou aux <a href="https://fr.wikipedia.org/wiki/Enn%C3%A9agramme">ennéagrammes</a>, parce qu&#8217;il cherche <a href="https://www.unadfi.org/actualites/domaines-dinfiltration/sante-et-bien-etre/psychotherapie-et-developpement-personnel/alerte-sur-les-formations-a-l-enneagramme/">qui sont ceux derrière ces mouvements</a> et se rend compte qu&#8217;il est très facile de tomber dans des dérives sectaires et ne pas s&#8217;en rendre compte.</p>
</div>
<div class="paragraph">
<p>Je suis aussi le gars chiant qui fait confiance aux autorités sanitaires, y compris quand elles concluent qu&#8217;<a href="https://france3-regions.francetvinfo.fr/pays-de-la-loire/loire-atlantique/nantes/cancers-pediatriques-du-pays-de-retz-retour-sur-six-annees-de-combat-1990363.html">il n&#8217;y a statistiquement pas de surnombre de cancers pédiatriques au Sud de Nantes</a> alors qu&#8217;on était en <a href="https://www.ouest-france.fr/pays-de-la-loire/sainte-pazanne-44680/cancers-pediatriques-un-22-sup-e-sup-cas-confirme-autour-de-sainte-pazanne-da95a8e2-f7fc-11ea-86be-f690571173ca">droit de s&#8217;inquiéter</a>, mais aussi prêt à revoir ma position si de nouvelles données étaient disponibles.</p>
</div>
<div class="paragraph">
<p>Je suis celui qui heurte la sensibilité de ses amis, les choque, les énerve parfois (souvent), parce que j&#8217;apparais comme ne croyant en rien.</p>
</div>
</div>
<div class="sect2">
<h3 id="_triste_vie_que_celle_de_celui_qui_ne_croît_en_rien">Triste vie que celle de celui qui ne croît en rien</h3>
<div class="paragraph">
<p>Est-ce vrai ? Est-ce que je ne crois réellement en rien ?
Bien évidemment non.
J&#8217;ai mes propres croyances.
Par exemple, je <em>crois</em> qu&#8217;il existe une vie extra-terrestre. Sous quelle forme, je n&#8217;en sais rien, mais j&#8217;en suis intimement convaincu. Mais il s&#8217;agit d&#8217;une croyance, et en tant que tel, je n&#8217;essaierai pas de vous l&#8217;imposer. Je peux vous donner des idées sur le <em>pourquoi</em> j&#8217;y crois, mais il n&#8217;existe aucune <em>preuve</em>.
J&#8217;ai cru à beaucoup de choses aussi: gamin j&#8217;ai cru au bisou magique, j&#8217;ai cru au Père Noël, j&#8217;ai cru que la graphologie fonctionnait (alors que je suis horrifié de constater que cet outil est toujours utilisé de nos jours !).
Je crois qu&#8217;il n&#8217;existe pas de vie après la mort, mais je ne peux pas vous en apporter la preuve.
Je crois aussi qu&#8217;on n&#8217;a pas besoin de revenir 200 ans en arrière en agriculture pour "sauver la planète".</p>
</div>
<div class="paragraph">
<p>Alors on pourrait dire "mais c&#8217;est pas bien grave", "mais les plantes c&#8217;est quand même bien, c&#8217;est mieux que les produits chimiques", "la science n&#8217;explique pas tout", "faut il se fâcher pour ça ?".
Tant de lieux communs, qui n&#8217;apportent rien, mais qui, en revanche, cachent de tristes réalités: <a href="https://www.leparisien.fr/faits-divers/miguel-b-le-naturopathe-qui-pretend-guerir-le-cancer-aurait-fait-au-moins-deux-autres-victimes-14-10-2021-XMQKFRJHGFFDLJQRZZ4DWW4E5E.php">des morts</a>, souvent <a href="https://www.midilibre.fr/2021/11/23/covid-19-quest-ce-que-lanthroposophie-possible-frein-a-la-vaccination-dans-les-pays-germanophones-9945410.php">par milliers</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_dur_dêtre_celui_qui_gâche_la_fête">Dur d&#8217;être celui qui gâche la fête</h3>
<div class="paragraph">
<p>Alors je si je suis suis le gars chiant, je ne cache pas que c&#8217;est parfois fatigant, moralement: si j&#8217;écris ce billet, c&#8217;est aussi pour exprimer cette fatigue.
C&#8217;est fatigant parce que je vais contre les idées reçues, je "casse l&#8217;ambiance" mais surtout je peux me fâcher avec des personnes que j&#8217;apprécie énormément.
C&#8217;est fatigant parce qu&#8217;on me regarde en sachant d&#8217;avance que je vais intervenir, mais on ne croira pas ce que je dis, même preuves à l&#8217;appui.
C&#8217;est fatigant parce que je constate la montée de l&#8217;obscurantisme, du complotisme et que je me sens impuissant.
C&#8217;est fatigant parce qu&#8217;il est urgent d&#8217;agir pour sauver notre avenir (je ne parlerai pas de sauver la planète, c&#8217;est l&#8217;espèce humaine, et les espèces actuelles en général qui est en jeu) et que les décisions prises ne sont pas à la hauteur.
C&#8217;est fatigant parce que j&#8217;aspire à plus d&#8217;écologie, plus de simplicité, mais que tous les mouvements que je trouve sont plombés par de l&#8217;anti-science et des sectes déguisées en "spiritualité".
C&#8217;est fatigant parce qu&#8217;on me caricature: je suis le "rationnel" qui ne comprend rien aux sciences humaines ou à l&#8217;humain en général.
C&#8217;est fatigant parce qu&#8217;on se bat constamment contre l&#8217;intolérance.
Tout ce que je vous raconte est présent partout: famille, amis, collègues, politiques, mais chez moi y compris.</p>
</div>
<div class="paragraph">
<p>Alors, parfois, parce que je ne veux pas me fâcher ou faire honte à madame, je me tais et je deviens d&#8217;humeur sombre, ne m&#8217;en voulez pas.</p>
</div>
<div class="paragraph">
<p>Nous sommes tous pleins de croyances: la question est de savoir si nous sommes prêts à les remettre en question, pour le bien de tous, et si ces croyances doivent influencer les décisions que nous prenons pour la communauté.
Et parce que nous sommes tous susceptibles de faire des erreurs, je ne porte aucun jugement moral à celles et ceux qui croient ceci ou celà: nous sommes tous pleins de contradictions et je ne suis pas mieux qu&#8217;un autre.
Je n&#8217;en veux pas à ceux qui croient, je ne doute pas qu&#8217;ils aient de bonnes intentions.
Je pourrais en vouloir à ceux qui continuent de croire lorsqu&#8217;on leur montre qu&#8217;il y a de quoi douter, ou mieux qu&#8217;on leur apporte des preuves, mais <a href="https://fr.wikipedia.org/wiki/Biais_cognitif">notre cerveau est câblé pour rendre la remise en question difficile</a>.
J&#8217;en veux, en revanche, à ceux qui utilisent <em>sciemment</em> l&#8217;ignorance des gens pour en tirer profit financièrement ou pour psychologiquement de personnes.</p>
</div>
<div class="paragraph">
<p>Je n&#8217;ai pas de chiffres à vous donner, mais <em>je crois</em> que ces ordures sont nombreuses.</p>
</div>
</div></p>
			<p><a href="/blog/2022/07/je-suis-le-gars-chiant.html#disqus_thread">Comments</a></p>
	
	<hr />
	
	<p>Older posts are available in the <a href="/blog/archive.html">archive</a>.</p>

		</div>
		<div id="push"></div>
    </div>
    
    <div id="footer">
      <div class="container">
	<p class="muted credit">All posts on this blog are published with a <em>Creative Commons by-nc-sa</em> license.<a rel="license" href="https://creativecommons.org/licenses/by-nc-sa/2.0/fr/"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-nc-sa/2.0/fr/88x31.png"/></a></p>
        <p class="muted credit">&copy; 2013 | Mixed with <a href="https://twitter.github.com/bootstrap/">Bootstrap v3.0.3</a> | Baked with <a href="https://jbake.org">JBake v2.6.6</a></p>
      </div>
    </div>
    
    <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="/blog/js/jquery-1.11.1.min.js"></script>
    <script src="/blog/js/bootstrap.min.js"></script>
    <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+"://platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>
   <script>hljs.highlightAll();</script>
    <script type="text/javascript">
    var disqus_shortname = 'melixblog';

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function () {
        var s = document.createElement('script'); s.async = true;
        s.type = 'text/javascript';
        s.src = '//' + disqus_shortname + '.disqus.com/count.js';
        (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
    }());
    </script>
<script type="text/javascript">
  window.___gcfg = {lang: 'fr'};

  (function() {
    var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
    po.src = 'https://apis.google.com/js/plusone.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
  })();
</script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-45962373-1', 'melix.github.io');
  ga('send', 'pageview');

</script>
  </body>
</html>
